!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDraggable=t.checkAncestor=t.stripHTML=t.addClickAndKeyboardListeners=t.keyCode=t.defaultValue=t.contains=t.isIOS=t.isIPad=t.kebabCase=t.isFunction=t.flattenArray=void 0;var r=n(1),i=(t.flattenArray=function(e){return e.concat.apply([],e)},t.isFunction=function(e){return"function"==typeof e},t.kebabCase=function(e){return e.replace(/[\W]/g,"-")},t.isIPad=null!==navigator.userAgent.match(/iPad/i),t.isIOS=null!==navigator.userAgent.match(/iPad|iPod|iPhone/i),t.contains=function(e,t){return-1!==e.indexOf(t)}),o=(t.defaultValue=function(e,t){return void 0!==e?e:t},t.keyCode={ENTER:13,ESC:27,SPACE:32}),a=(t.addClickAndKeyboardListeners=function(e,t,n){e.click(function(e){t.call(n||this,e)}),e.keydown(function(e){i([o.ENTER,o.SPACE],e.which)&&(e.preventDefault(),t.call(n||this,e))})},(0,r.jQuery)("<div>"));t.stripHTML=function(e){return a.html(e).text().trim()},t.checkAncestor=function e(t,n){return t&&n?t===n||t.parentNode===n?n:t.parentNode?e(t.parentNode,n):null:null},t.isDraggable=function e(t){return!(!t||!t.classList)&&(!!t.classList.contains("h5p-book-maker-draggable-element")||!!t.parentNode&&e(t.parentNode))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.jQuery=H5P.jQuery,t.EventDispatcher=H5P.EventDispatcher,t.JoubelUI=H5P.JoubelUI},function(e,t,n){"use strict";function r(e,t){var n=this;o.call(n),n.children=[];var r=function(e){for(var t=e;t<n.children.length;t++)n.children[t].index=t};if(n.addChild=function(t,o){void 0===o&&(o=n.children.length);var a=new i(o,n);return o===n.children.length?n.children.push(a):(n.children.splice(o,0,a),r(o)),e.call(a,t),a},n.removeChild=function(e){n.children.splice(e,1),r(e)},n.moveChild=function(e,t){var i=n.children.splice(e,1)[0];n.children.splice(t,0,i),r(t<e?t:e)},t)for(var a=0;a<t.length;a++)n.addChild(t[a])}var i=n(11),o=H5P.EventDispatcher;r.prototype=Object.create(o.prototype),r.prototype.constructor=r,e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.curry=function(e){var t=e.length;return function n(){var r=Array.prototype.slice.call(arguments,0);return r.length>=t?e.apply(null,r):function(){var e=Array.prototype.slice.call(arguments,0);return n.apply(null,r.concat(e))}}},i=(t.compose=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})},t.forEach=r(function(e,t){t.forEach(e)}),t.map=r(function(e,t){return t.map(e)}),t.filter=r(function(e,t){return t.filter(e)})),o=(t.some=r(function(e,t){return t.some(e)}),t.contains=r(function(e,t){return-1!=t.indexOf(e)}));t.without=r(function(e,t){return i(function(t){return!o(t,e)},t)}),t.inverseBooleanString=function(e){return("true"!==e).toString()}},function(e,t,n){"use strict";n(5),n(6),n(7),n(8),n(9);var r=n(10),i=function(e){return e&&e.__esModule?e:{default:e}}(r);H5P=H5P||{},H5P.BookMaker=i.default},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=r(i),a=n(12),s=r(a),c=n(18),l=r(c),u=n(19),d=r(u),p=n(1),h=n(0),f=n(20),v=r(f),b=function(e,t,n){var r=this,i=this;this.book=e.book,this.scenes=this.book.scenes,this.contentId=t,this.elementInstances=[],this.elementsAttached=[],this.hasAnswerElements=!1,this.ignoreResize=!1,this.attentionSeeker=new H5P.AttentionSeeker,n.bookMakerEditor&&(this.editor=n.bookMakerEditor),this.audioReferences=[],this.editor?this.editor.on("removeScene",function(e){r.$scenesWrapper.children().eq(e.data).remove()}):e.book.scenes.forEach(function(e){e.elements&&e.elements.forEach(function(t){var n=t.action&&t.action.library?t.action.library.split(" ")[0]:null;if(n&&"H5P.Audio"===n&&t.canBeChangedByUser){var r={backgroundOpacity:0,displayAsButton:!0,height:8.88887,width:5,x:t.x+t.width-2.5,y:t.y-4.444435,action:{library:"H5P.AudioRecorderBookMaker 1.0",metadata:{contentType:"AudioRecorderBookMaker",license:"U",title:"Untitled Audio Recorder"},params:{l10n:{recordAnswer:"Record",pause:"Pause",continue:"Continue",download:"Use",done:"Done",retry:"Retry",microphoneNotSupported:"Microphone not supported. Make sure you are using a browser that allows microphone recording.",microphoneInaccessible:"Microphone is not accessible. Make sure that the browser microphone is enabled.",insecureNotAllowed:"Access to microphone is not allowed in your browser since this page is not served using HTTPS. Please contact the author, and ask him to make this available using HTTPS",statusReadyToRecord:"Press a button below to record your answer.",statusRecording:"Recording...",statusPaused:"Recording paused. Press a button to continue recording.",statusFinishedRecording:"You have successfully recorded your answer! Listen to the recording below.",downloadRecording:"Download this recording or retry.",retryDialogHeaderText:"Retry recording?",retryDialogBodyText:'By pressing "Retry" you will lose your current recording.',retryDialogConfirmText:"Retry",retryDialogCancelText:"Cancel",statusCantCreateTheAudioFile:"Can't create the audio file."}},subContentId:H5P.createUUID()}};e.elements=e.elements.concat(r)}})}),n&&(this.previousState=n.previousState),this.currentSceneIndex=this.previousState&&this.previousState.progress?this.previousState.progress:0,this.l10n=p.jQuery.extend({scene:"Scene",retry:"Retry",close:"Close",fullscreen:"Fullscreen",exitFullscreen:"Exit fullscreen",prevScene:"Previous scene",nextScene:"Next scene",currentScene:"Current scene",lastScene:"Last scene",printTitle:"Print",printIngress:"How would you like to print this presentation?",printAllScenes:"Print all scenes",printCurrentScene:"Print current scene",noTitle:"No title",accessibilitySceneNavigationExplanation:"Use left and right arrow to change scene in that direction whenever canvas is selected.",sceneCount:"Scene @index of @total",accessibilityCanvasLabel:"Presentation canvas. Use left and right arrow to move between scenes."},void 0!==e.l10n?e.l10n:{}),e.override&&(this.enablePrintButton=!!e.override.enablePrintButton),this.players=[],this.setElementsOverride(e.override),e.book.scenes.forEach(function(t){t.attentionSeeker=e.override&&e.override.attentionSeekerCorner}),o.default.call(this,v.default,e.book.scenes),this.on("resize",this.resize,this),this.on("printing",function(e){i.ignoreResize=!e.data.finished,e.data.finished?i.resize():e.data.allScenes&&i.attachAllElements()})};b.prototype=Object.create(o.default.prototype),b.prototype.constructor=b,b.prototype.attach=function(e){var t=this,n=this;void 0!==this.isRoot&&this.isRoot()&&this.setActivityStarted();var r='<div class="h5p-keymap-explanation hidden-but-read">'+this.l10n.accessibilitySceneNavigationExplanation+'</div><div class="h5p-fullscreen-announcer hidden-but-read" aria-live="polite"></div><div class="h5p-wrapper" tabindex="0" aria-label="'+this.l10n.accessibilityCanvasLabel+'">  <div class="h5p-current-scene-announcer hidden-but-read" aria-live="polite"></div>  <div tabindex="-1"></div>  <div class="h5p-box-wrapper">    <div class="h5p-presentation-wrapper">     <div class="h5p-scenes-wrapper"></div>    </div>  </div>  <nav class="h5p-book-maker-navigation">    <ol class="h5p-progressbar list-unstyled"></ol>  </nav>  <div class="h5p-footer"></div></div>';e.attr("role","application").addClass("h5p-book-maker").html(r),this.$container=e,this.$sceneAnnouncer=e.find(".h5p-current-scene-announcer"),this.$fullscreenAnnouncer=e.find(".h5p-fullscreen-announcer"),this.$sceneTop=this.$sceneAnnouncer.next(),this.$wrapper=e.children(".h5p-wrapper").focus(function(){n.initKeyEvents()}).blur(function(){void 0!==n.keydown&&(H5P.jQuery("body").unbind("keydown",n.keydown),delete n.keydown)}).click(function(e){var t=H5P.jQuery(e.target),r=n.belongsToTagName(e.target,["input","textarea","a","button"],e.currentTarget),i=n.belongsToTabIndexed(e.target),o=t.closest(".h5p-popup-container"),a=0!==o.length;if(!r&&!i&&!n.editor)if(a){var s=t.closest("[tabindex]");1===s.closest(".h5p-popup-container").length?s.focus():o.find(".h5p-close-popup").focus()}else n.$wrapper.focus()}),this.on("exitFullScreen",function(){t.$footer.removeClass("footer-full-screen"),t.$fullScreenButton.attr("title",t.l10n.fullscreen),t.$fullscreenAnnouncer.html(t.l10n.accessibilityExitedFullscreen)}),this.on("enterFullScreen",function(){t.$fullscreenAnnouncer.html(t.l10n.accessibilityEnteredFullscreen)});var i=parseInt(this.$wrapper.css("width"));this.width=0!==i?i:640;var o=parseInt(this.$wrapper.css("height"));this.height=0!==o?o:400,this.ratio=16/9,this.fontSize=16,this.$boxWrapper=this.$wrapper.children(".h5p-box-wrapper");var a=this.$boxWrapper.children(".h5p-presentation-wrapper");this.$scenesWrapper=a.children(".h5p-scenes-wrapper"),this.$progressbar=this.$wrapper.find(".h5p-progressbar"),this.$footer=this.$wrapper.children(".h5p-footer"),this.createScenes(),this.elementsAttached[this.currentSceneIndex]=!0,this.runAttentionSeekers(this.getCurrentSceneIndex()),this.initTouchEvents(),this.navigationLine=new s.default(this),this.previousState&&this.previousState.progress||this.setSceneNumberAnnouncer(0,!1),this.isEditor()||(this.createNavigationBars(),this.createFullScreenButton(),this.$wrapper.find(".h5p-book-maker-navigation").hide(),this.$footer.hide()),new d.default(this),this.previousState&&this.previousState.progress&&this.jumpToScene(this.previousState.progress),setTimeout(function(){t.resize()},100)},b.prototype.belongsToTagName=function(e,t,n){if(!e)return!1;n=n||document.body,"string"==typeof t&&(t=[t]),t=t.map(function(e){return e.toLowerCase()});var r=e.tagName.toLowerCase();return-1!==t.indexOf(r)||n!==e&&this.belongsToTagName(e.parentNode,t,n)},b.prototype.belongsToTabIndexed=function(e,t){return!!e&&(t=t||document.body,-1!==e.tabIndex||t!==e&&this.belongsToTabIndexed(e.parentNode,t))},b.prototype.createSceneTitle=function(){return this.isEditor()?this.l10n.noTitle:null},b.prototype.isEditor=function(){return void 0!==this.editor},b.prototype.createNavigationBars=function(){var e=this;this.navigationLeft=new l.default({label:this.l10n.prevScene,position:"left",prefix:"h5p-book-maker"},{onClick:function(){if(0!==e.currentSceneIndex){var t=e.children[e.getCurrentSceneIndex()].getCorner("left").dom;t&&t.click(),e.previousScene()}}}),this.$wrapper.append(this.navigationLeft.getDOM()),this.navigationRight=new l.default({label:this.l10n.nextScene,position:"right",prefix:"h5p-book-maker"},{onClick:function(){if(!(e.currentSceneIndex+1>=e.children.length)){var t=e.children[e.getCurrentSceneIndex()].getCorner("right").dom;t&&t.click(),e.nextScene()}}}),this.navigationRight.show(),this.$wrapper.append(this.navigationRight.getDOM())},b.prototype.createFullScreenButton=function(){var e=this;if(!0===H5P.fullscreenSupported){var t=document.querySelector(".h5p-container"),n=function(n){n&&"keypress"===n.type&&13!==n.keyCode&&32!==n.keyCode||(n.preventDefault(),!0===H5P.isFullscreen?H5P.exitFullScreen():H5P.fullScreen(H5P.jQuery(t),e))};this.fullScreenButton=document.createElement("button"),this.fullScreenButton.classList.add("h5p-book-maker-fullscreen-button"),this.fullScreenButton.setAttribute("aria-label",this.l10n.fullscreen),this.fullScreenButton.addEventListener("click",n),this.on("enterFullScreen",function(){e.fullScreenButton.setAttribute("aria-label",e.l10n.exitFullscreen)}),this.on("exitFullScreen",function(){e.fullScreenButton.setAttribute("aria-label",e.l10n.fullscreen)});var r=document.createElement("div");r.classList.add("h5p-book-maker-fullscreen-button-wrapper"),r.appendChild(this.fullScreenButton),t.insertBefore(r,t.firstChild)}},b.prototype.createScenes=function(){for(var e=this,t=0;t<e.children.length;t++){var n=t===e.currentSceneIndex;e.children[t].getElement().appendTo(e.$scenesWrapper),n&&e.children[t].setCurrent(),(e.isEditor()||0===t||1===t||n)&&e.children[t].appendElements()}},b.prototype.getScore=function(){return 0},b.prototype.getMaxScore=function(){return 0},b.prototype.resize=function(){var e=this.$container.hasClass("h5p-fullscreen")||this.$container.hasClass("h5p-semi-fullscreen");if(!this.ignoreResize){this.$wrapper.css("width","auto");var t=this.$container.width(),n={};if(e){var r=this.$container.height();t/r>this.ratio&&(t=r*this.ratio,n.width=t+"px")}var i=t/this.width;n.height=t/this.ratio+"px",n.fontSize=this.fontSize*i+"px",void 0!==this.editor&&this.editor.setContainerEm(this.fontSize*i*.75),this.$wrapper.css(n),this.swipeThreshold=100*i;var o=this.elementInstances[this.$current.index()];if(void 0!==o)for(var a=0;a<o.length;a++){var s=o[a];void 0!==s.preventResize&&!1!==s.preventResize||void 0===s.$||H5P.trigger(s,"resize")}}},b.prototype.toggleFullScreen=function(){H5P.isFullscreen||this.$container.hasClass("h5p-fullscreen")||this.$container.hasClass("h5p-semi-fullscreen")?void 0!==H5P.exitFullScreen&&void 0!==H5P.fullScreenBrowserPrefix?H5P.exitFullScreen():void 0===H5P.fullScreenBrowserPrefix?H5P.jQuery(".h5p-disable-fullscreen").click():""===H5P.fullScreenBrowserPrefix?window.top.document.exitFullScreen():"ms"===H5P.fullScreenBrowserPrefix?window.top.document.msExitFullscreen():window.top.document[H5P.fullScreenBrowserPrefix+"CancelFullScreen"]():(this.$footer.addClass("footer-full-screen"),this.$fullScreenButton.attr("title",this.l10n.exitFullscreen),H5P.fullScreen(this.$container,this),void 0===H5P.fullScreenBrowserPrefix&&H5P.jQuery(".h5p-disable-fullscreen").hide())},b.prototype.focus=function(){this.$wrapper.focus()},b.prototype.setElementsOverride=function(e){this.elementsOverride={params:{}},e&&(this.elementsOverride.params.behaviour={},e.retryButton&&(this.elementsOverride.params.behaviour.enableRetry="on"===e.retryButton))},b.prototype.attachElements=function(e,t){if(void 0===this.elementsAttached[t]){var n=this.scenes[t],r=this.elementInstances[t];if(void 0!==n.elements)for(var i=0;i<n.elements.length;i++)this.attachElement(n.elements[i],r[i],e,t);this.trigger("domChanged",{$target:e,library:"BookMaker",key:"newScene"},{bubbles:!0,external:!0}),this.elementsAttached[t]=!0}},b.prototype.addAttentionSeeker=function(e,t){var n=this;if(t.attentionSeeker.style&&"none"!==t.attentionSeeker.style){t.attentionSeeker.workerId=this.attentionSeeker.register({element:e,style:t.attentionSeeker.style,interval:1e3*(t.attentionSeeker.interval||10),repeat:t.attentionSeeker.repeat||1/0});var r=function(){n.attentionSeeker.unregister(t.attentionSeeker.workerId)};e.addEventListener("click",r,t.attentionSeeker.workerId),e.addEventListener("mousedown",r,t.attentionSeeker.workerId),e.addEventListener("touchstart",r,t.attentionSeeker.workerId),this.attentionSeeker.on("removed",function(n){n.data===t.attentionSeeker.workerId&&(t.attentionSeeker.workerId=b.ATTENTION_SEEKER_DONE,e.removeEventListener("click",r),e.removeEventListener("mousedown",r),e.removeEventListener("touchstart",r))})}},b.prototype.runAttentionSeeker=function(e,t){if(t.attentionSeeker){if("number"==typeof t.attentionSeeker.workerId){if(t.attentionSeeker.workerId<0)return;return void this.attentionSeeker.run(t.attentionSeeker.workerId)}t.attentionSeeker.style&&"none"!==t.attentionSeeker.style&&(this.addAttentionSeeker(e,t),this.attentionSeeker.run(t.attentionSeeker.workerId))}},b.prototype.runAttentionSeekers=function(e){var t=this;if(!this.isEditor()&&e===this.getCurrentSceneIndex()){this.$current[0].querySelectorAll(".h5p-element").forEach(function(n,r){t.runAttentionSeeker(n,t.scenes[e].elements[r])});for(var n in this.children[e].getCorners()){var r=this.children[e].getCorners();r[n].dom&&this.runAttentionSeeker(r[n].dom,r[n].element)}}},b.prototype.pauseAttentionSeeker=function(e){e&&e.attentionSeeker&&("number"!=typeof e.attentionSeeker.workerId||e.attentionSeeker.workerId<0||this.attentionSeeker.pause(e.attentionSeeker.workerId))},b.prototype.pauseAttentionSeekers=function(e){var t=this;if(!this.isEditor()){this.scenes[e].elements.forEach(function(e){t.pauseAttentionSeeker(e)});for(var n in this.children[e].getCorners()){var r=this.children[e].getCorners();this.pauseAttentionSeeker(r[n].element)}}},b.prototype.attachElement=function(e,t,n,r){var i=this,o=void 0!==e.displayAsButton&&e.displayAsButton,a="h5p-element"+(o?" h5p-element-button-wrapper h5p-element-button-big":""),s=H5P.jQuery("<div>",{class:a}).css({left:e.x+"%",top:e.y+"%",width:e.width+"%",height:e.height+"%"}).appendTo(n),c=void 0===e.backgroundOpacity||0===e.backgroundOpacity;if(s.toggleClass("h5p-transparent",c),o){this.createInteractionButton(e,t).appendTo(s)}else{var l=e.action&&e.action.library,u=l?this.getLibraryTypePmz(e.action.library):"other",d=H5P.jQuery("<div>",{class:"h5p-element-outer "+u+"-outer-element"}).css({background:"rgba(255,255,255,"+(void 0===e.backgroundOpacity?0:e.backgroundOpacity/100)+")"}).appendTo(s),p=H5P.jQuery("<div>",{class:"h5p-element-inner"}).appendTo(d);t.on("set-size",function(e){for(var t in e.data)s.get(0).style[t]=e.data[t]}),t.attach(p),this.setOverflowTabIndex()}if(void 0!==this.editor&&this.editor.processElement(e,s,r,t),e.action&&e.action.library&&"H5P.Audio"===e.action.library.split(" ")[0]){var h=p.get(0).querySelector("button");if(h&&e.customImagePlay&&e.customImagePlay.path){h.classList.add("h5p-book-maker-custom-audio-button");var f=document.createElement("img");f.classList.add("h5p-book-maker-custom-audio-button-image"),f.classList.add("h5p-book-maker-selection-not-allowed"),f.setAttribute("draggable",!1),H5P.setSource(f,e.customImagePlay,this.contentId),h.appendChild(f),t.audio.addEventListener("ended",function(){H5P.setSource(f,e.customImagePlay,i.contentId)}),e.customImagePlayPaused&&e.customImagePlayPaused.path&&t.audio.addEventListener("pause",function(){H5P.setSource(f,e.customImagePlayPaused,i.contentId)}),e.customImagePause&&e.customImagePause.path&&t.audio.addEventListener("play",function(){H5P.setSource(f,e.customImagePause,i.contentId)})}}if(!this.editor&&e.action&&e.action.library&&"H5P.Image"===e.action.library.split(" ")[0]){var v=s.get(0);if(v.classList.add("h5p-book-maker-selection-not-allowed"),e.canBeMovedByUser)v.classList.add("h5p-book-maker-draggable-element"),this.addElementMoveListeners(v,e.audio);else{var b=v.querySelector("img");b&&b.setAttribute("draggable",!1)}}if(!this.editor&&e.action&&e.action.library&&"H5P.AdvancedText"===e.action.library.split(" ")[0]&&e.canBeChangedByUser){var g=s.get(0);g.classList.add("h5p-book-maker-no-overflow"),g.setAttribute("contenteditable","true"),g.setAttribute("role","input"),g.addEventListener("click",function(e){var t=document.querySelector(".h5p-content");t&&t.classList.remove("using-mouse"),e.currentTarget.focus()})}return s},b.prototype.addElementMoveListeners=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.parentNode,i={},o=!1,a=void 0,s=void 0,c=void 0,l=void 0,u=0,d=0;["pickedUp","dropped"].forEach(function(e){if(n[e]&&Array.isArray(n[e])&&!(n[e].length<1)&&n[e][0].path&&"audio"===n[e][0].mime.split("/")[0]){var o=document.createElement("audio");o.classList.add("h5p-dragquestion-no-display"),o.src=H5P.getPath(n[e][0].path,t.contentId),r.appendChild(o),t.players.push(o),i[e]=o}});var p=function(n){a=0,s=0;var r=(0,h.checkAncestor)(n.target,e);if(r){t.isEditor()||(t.navigationLeft.hide(),t.navigationRight.hide()),"touchstart"===n.type?(c=n.touches[0].clientX-u,l=n.touches[0].clientY-d):(c=n.clientX-u,l=n.clientY-d);for(var p=document.querySelector(".h5p-scene.h5p-current").querySelectorAll(".h5p-book-maker-draggable-element"),f=0;f<p.length;f++)p[f].classList.remove("h5p-book-maker-draggable-element-top");r.classList.add("h5p-book-maker-draggable-element-top"),r.classList.add("h5p-book-maker-draggable-element-grabbing"),o=!0,i.pickedUp&&(t.resetAudios(),t.playAudio(i.pickedUp))}},f=function(t){o&&(t.preventDefault(),"touchmove"===t.type?(a=t.touches[0].clientX-c,s=t.touches[0].clientY-l):(a=t.clientX-c,s=t.clientY-l),u=a,d=s,e.style.transform="translate3d("+a+"px, "+s+"px, 0)")},v=function(n){if(o){t.isEditor()||(t.currentSceneIndex>0&&t.navigationLeft.show(),t.currentSceneIndex<t.children.length-1&&t.navigationRight.show()),c=a,l=s;var r=(0,h.checkAncestor)(n.target,e);if(r&&(r.classList.remove("h5p-book-maker-draggable-element-grabbing"),i.dropped&&(t.resetAudios(),t.playAudio(i.dropped))),0!==a&&0!==s){var p=window.getComputedStyle(e),f=parseInt(p.getPropertyValue("left")),v=parseInt(p.getPropertyValue("top"));e.style.left=f+a+"px",e.style.top=v+s+"px",e.style.transform="",u=0,d=0}o=!1}};r.addEventListener("touchstart",p,!1),r.addEventListener("touchmove",f,!1),r.addEventListener("touchend",v,!1),r.addEventListener("mousedown",p,!1),r.addEventListener("mousemove",f,!1),r.addEventListener("mouseup",v,!1)},b.prototype.disableTabIndexes=function(){var e=this.$container.find(".h5p-popup-container");this.$tabbables=this.$container.find("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter(function(){var t=(0,p.jQuery)(this),n=p.jQuery.contains(e.get(0),t.get(0));if(t.data("tabindex"))return!0;if(!n){var r=t.attr("tabindex");return t.data("tabindex",r),t.attr("tabindex","-1"),!0}return!1})},b.prototype.restoreTabIndexes=function(){this.$tabbables&&this.$tabbables.each(function(){var e=(0,p.jQuery)(this),t=e.data("tabindex");e.hasClass("ui-scener-handle")?(e.attr("tabindex",0),e.removeData("tabindex")):void 0!==t?(e.attr("tabindex",t),e.removeData("tabindex")):e.removeAttr("tabindex")})},b.prototype.createInteractionButton=function(e,t){var n=this,r=e.action.params&&e.action.params.bookMakerAutoplay,i=e.action.metadata?e.action.metadata.title:"";""===i&&(i=e.action.params&&e.action.params.contentName||e.action.library.split(" ")[0].split(".")[1]);var o=this.getLibraryTypePmz(e.action.library),a=function(e){return function(){return e.attr("aria-expanded","false")}},s=(0,p.jQuery)("<div>",{role:"button",tabindex:0,"aria-label":i,"aria-popup":!0,"aria-expanded":!1,class:"h5p-element-button "+o+"-button"}),c=(0,p.jQuery)('<div class="h5p-button-element"></div>');t.attach(c);var l="h5p-advancedtext"===o?{x:e.x,y:e.y}:null;return(0,h.addClickAndKeyboardListeners)(s,function(){s.attr("aria-expanded","true"),n.showInteractionPopup(t,s,c,o,r,a(s),l),n.disableTabIndexes()}),void 0!==e.action&&"H5P.InteractiveVideo"===e.action.library.substr(0,20)&&t.on("controls",function(){t.controls.$fullscreen&&t.controls.$fullscreen.remove()}),s},b.prototype.showInteractionPopup=function(e,t,n,r,i,o){var a=this,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=function(){e.trigger("resize")};this.isEditor()||(this.on("exitFullScreen",c),this.showPopup(n,t,s,function(){a.pauseMedia(e),n.detach(),a.off("exitFullScreen",c),o()},r),H5P.trigger(e,"resize"),"h5p-image"===r&&this.resizePopupImage(n),setTimeout(function(){var e=n.find(":input").add(n.find("[tabindex]"));e.length?e[0].focus():(n.attr("tabindex",0),n.focus())},200),(0,h.isFunction)(e.setActivityStarted)&&(0,h.isFunction)(e.getScore)&&e.setActivityStarted(),i&&(0,h.isFunction)(e.play)&&e.play())},b.prototype.getLibraryTypePmz=function(e){return(0,h.kebabCase)(e.split(" ")[0]).toLowerCase()},b.prototype.resizePopupImage=function(e){var t=Number(e.css("fontSize").replace("px","")),n=e.find("img"),r=function(n,r){if(!(r/t<18.5)){var i=n/r;r=18.5*t,e.css({width:r*i,height:r})}};n.height()?r(n.width(),n.height()):n.one("load",function(){r(this.width,this.height)})},b.prototype.showPopup=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this,o=arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"h5p-popup-comment-field",s=this,c=function(e){if(n)return void(n=!1);void 0!==o&&setTimeout(function(){o(),s.restoreTabIndexes()},100),e.preventDefault(),l.addClass("h5p-animate"),l.find(".h5p-popup-container").addClass("h5p-animate"),setTimeout(function(){l.remove()},100),t.focus()},l=(0,p.jQuery)('<div class="h5p-popup-overlay '+a+'"><div class="h5p-popup-container" role="dialog"><div class="h5p-book-maker-dialog-titlebar"><div class="h5p-dialog-title"></div><div role="button" tabindex="0" class="h5p-close-popup" title="'+this.l10n.close+'"></div></div><div class="h5p-popup-wrapper" role="document"></div></div></div>'),u=l.find(".h5p-popup-wrapper");e instanceof H5P.jQuery?u.append(e):u.html(e);var d=l.find(".h5p-popup-container");return function(e,t,n){if(n){t.css({visibility:"hidden"}),e.prependTo(i.$wrapper);var r=t.height(),o=t.width(),a=e.height(),s=e.width(),c=o*(100/s),l=r*(100/a);if(c>50&&l>50)return void e.detach();c>l&&l<45&&(c=Math.sqrt(c*l),t.css({width:c+"%"}));var u=100-c-7.5,d=n.x;n.x>u?d=u:n.x<7.5&&(d=7.5),l=t.height()*(100/a);var p=100-l-10,h=n.y;n.y>p?h=p:n.y<10&&(h=10),e.detach(),t.css({left:d+"%",top:h+"%"})}}(l,d,r),l.addClass("h5p-animate"),d.css({visibility:""}).addClass("h5p-animate"),l.prependTo(this.$wrapper).focus().removeClass("h5p-animate").click(c).find(".h5p-popup-container").removeClass("h5p-animate").click(function(){n=!0}).keydown(function(e){e.which===h.keyCode.ESC&&c(e)}).end(),(0,h.addClickAndKeyboardListeners)(l.find(".h5p-close-popup"),function(e){return c(e)}),l},b.prototype.initKeyEvents=function(){if(void 0===this.keydown){var e=this,t=!1;this.keydown=function(n){t||(37!==n.keyCode&&33!==n.keyCode||!e.previousScene()?39!==n.keyCode&&34!==n.keyCode||!e.nextScene()||(n.preventDefault(),t=!0):(n.preventDefault(),t=!0),t&&setTimeout(function(){t=!1},300))},H5P.jQuery("body").keydown(this.keydown)}},b.prototype.initTouchEvents=function(){var e,t,n,r,i,o,a=this,s=!1,c=!1,l=function(e){return{"-webkit-transform":e,"-moz-transform":e,"-ms-transform":e,transform:e}},u=l("");this.$scenesWrapper.bind("touchstart",function(l){if(a.isEditor()||(a.navigationLeft.hide(),a.navigationRight.hide()),!(0,h.isDraggable)(l.target)){c=!1,n=e=l.originalEvent.touches[0].pageX,t=l.originalEvent.touches[0].pageY;var u=a.$scenesWrapper.width();r=0===a.currentSceneIndex?0:-u,i=a.currentSceneIndex+1>=a.scenes.length?0:u,o=null,s=!0}}).bind("touchmove",function(u){if(!(0,h.isDraggable)(u.target)){var d=u.originalEvent.touches;s&&(a.$current.prev().addClass("h5p-touch-move"),a.$current.next().addClass("h5p-touch-move"),s=!1),n=d[0].pageX;var p=e-n;null===o&&(o=Math.abs(t-u.originalEvent.touches[0].pageY)>Math.abs(p)),1!==d.length||o||(u.preventDefault(),c||(p<0?a.$current.prev().css(l("translateX("+(r-p)+"px")):a.$current.next().css(l("translateX("+(i-p)+"px)")),a.$current.css(l("translateX("+-p+"px)"))))}}).bind("touchend",function(){if(!o){var t=e-n;if(t>a.swipeThreshold&&a.nextScene()||t<-a.swipeThreshold&&a.previousScene())return}a.$scenesWrapper.children().css(u).removeClass("h5p-touch-move")})},b.prototype.updateTouchPopup=function(e,t,n,r){if(arguments.length<=0)return void(void 0!==this.touchPopup&&this.touchPopup.remove());void 0===this.touchPopup?this.touchPopup=H5P.jQuery("<div/>",{class:"h5p-touch-popup"}).insertAfter(e):this.touchPopup.insertAfter(e),r-.15*e.parent().height()<0?r=0:r-=.15*e.parent().height(),this.touchPopup.css({"max-width":e.width()-n,left:n,top:r}),this.touchPopup.html()},b.prototype.previousScene=function(e){var t=this.$current.prev();return!!t.length&&this.jumpToScene(t.index(),e,!1)},b.prototype.nextScene=function(e){var t=this.$current.next();return!!t.length&&this.jumpToScene(t.index(),e,!1)},b.prototype.isCurrentScene=function(e){return this.currentSceneIndex===e},b.prototype.getCurrentSceneIndex=function(){return this.currentSceneIndex},b.prototype.attachAllElements=function(){for(var e=this.$scenesWrapper.children(),t=0;t<this.scenes.length;t++)this.attachElements(e.eq(t),t)},b.prototype.jumpToScene=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this;if(void 0===this.editor&&this.contentId){var i=this.createXAPIEventTemplate("progressed");i.data.statement.object.definition.extensions["http://id.tincanapi.com/extension/ending-point"]=e+1,this.trigger(i)}if(!this.$current.hasClass("h5p-animate")){var o=this.$current.addClass("h5p-animate"),a=r.$scenesWrapper.children(),s=a.filter(":lt("+e+")");this.$current=a.eq(e).addClass("h5p-animate");var c=this.currentSceneIndex;this.currentSceneIndex=e,this.isEditor()||(0===e?(this.navigationLeft.hide(),this.navigationRight.show()):e===a.length-1?(this.navigationLeft.show(),this.navigationRight.hide()):(this.navigationLeft.show(),this.navigationRight.show())),this.pauseAttentionSeekers(c),this.attachElements(this.$current,e),this.runAttentionSeekers(e);var l=this.$current.next();l.length&&this.attachElements(l,e+1),this.setOverflowTabIndex();var u=this.elementInstances[c];if(void 0!==u)for(var d=0;d<u.length;d++)this.pauseMedia(u[d]);return setTimeout(function(){o.removeClass("h5p-current"),a.css({"-webkit-transform":"","-moz-transform":"","-ms-transform":"",transform:""}).removeClass("h5p-touch-move").removeClass("h5p-previous"),s.addClass("h5p-previous"),r.$current.addClass("h5p-current"),r.trigger("changedScene",r.$current.index())},1),setTimeout(function(){if(r.$scenesWrapper.children().removeClass("h5p-animate"),void 0===r.editor){var e=r.elementInstances[r.currentSceneIndex],t=r.scenes[r.currentSceneIndex].elements;if(void 0!==e)for(var n=0;n<e.length;n++)t[n]&&t[n].action&&t[n].action.params&&t[n].action.params.bookMakerAutoplay&&"function"==typeof e[n].play&&e[n].play(),"function"==typeof e[n].setActivityStarted&&"function"==typeof e[n].getScore&&e[n].setActivityStarted()}},250),r.navigationLine&&(r.navigationLine.updateProgressBar(e,c),r.navigationLine.updateFooter(e),this.setSceneNumberAnnouncer(e,n)),void 0!==this.editor&&void 0!==this.editor.dnb&&(this.editor.dnb.setContainer(this.$current),this.editor.dnb.blurAll()),this.trigger("resize"),!0}},b.prototype.setOverflowTabIndex=function(){void 0!==this.$current&&this.$current.find(".h5p-element-inner").each(function(){var e=(0,p.jQuery)(this),t=void 0;this.classList.contains("h5p-table")&&(t=e.find(".h5p-table").outerHeight());var n=e.closest(".h5p-element-outer").innerHeight();void 0!==t&&null!==n&&t>n&&e.attr("tabindex",0)})},b.prototype.setSceneNumberAnnouncer=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="";if(!this.navigationLine)return n;n+=this.navigationLine.createSceneTitle(e),this.$sceneAnnouncer.html(n),t&&this.$sceneTop.focus()},b.prototype.resetTask=function(){this.navigationLine.updateProgressBar(0),this.jumpToScene(0,!1),this.$container.find(".h5p-popup-overlay").remove()},b.prototype.getCopyrights=function(){var e,t=new H5P.ContentCopyrights;if(this.book&&this.book.globalBackgroundSelector&&this.book.globalBackgroundSelector.imageGlobalBackground){var n=this.book.globalBackgroundSelector.imageGlobalBackground,r=new H5P.MediaCopyright(n.copyright);r.setThumbnail(new H5P.Thumbnail(H5P.getPath(n.path,this.contentId),n.width,n.height)),t.addMedia(r)}for(var i=0;i<this.scenes.length;i++){var o=new H5P.ContentCopyrights;if(o.setLabel(this.l10n.scene+" "+(i+1)),this.scenes[i]&&this.scenes[i].sceneBackgroundSelector&&this.scenes[i].sceneBackgroundSelector.image){var a=this.scenes[i].sceneBackgroundSelector.image,s=new H5P.MediaCopyright(a.copyright);s.setThumbnail(new H5P.Thumbnail(H5P.getPath(a.path,this.contentId),a.width,a.height)),o.addMedia(s)}if(void 0!==this.elementInstances[i])for(var c=0;c<this.elementInstances[i].length;c++){var l=this.elementInstances[i][c];if(this.scenes[i].elements[c].action){var u=this.scenes[i].elements[c].action.params,d=this.scenes[i].elements[c].action.metadata;e=void 0,void 0!==l.getCopyrights&&(e=l.getCopyrights()),void 0===e&&(e=new H5P.ContentCopyrights,H5P.findCopyrights(e,u,this.contentId,{metadata:d,machineName:l.libraryInfo.machineName}));var p=c+1;void 0!==u.contentName?p+=": "+u.contentName:void 0!==l.getTitle?p+=": "+l.getTitle():u.l10n&&u.l10n.name&&(p+=": "+u.l10n.name),e.setLabel(p),o.addContent(e)}}t.addContent(o)}return t},b.prototype.pauseMedia=function(e){try{void 0!==e.pause&&(e.pause instanceof Function||"function"==typeof e.pause)?e.pause():void 0!==e.video&&void 0!==e.video.pause&&(e.video.pause instanceof Function||"function"==typeof e.video.pause)?e.video.pause():void 0!==e.stop&&(e.stop instanceof Function||"function"==typeof e.stop)&&e.stop()}catch(e){H5P.error(e)}},b.prototype.getXAPIData=function(){var e=this.createXAPIEventTemplate("answered"),t=e.getVerifiedStatementValue(["object","definition"]);H5P.jQuery.extend(t,{interactionType:"compound",type:"http://adlnet.gov/expapi/activities/cmi.interaction"});var n=this.getScore(),r=this.getMaxScore();return e.setScoredResult(n,r,this,!0,n===r),{statement:e.data.statement}},b.prototype.getChildren=function(){return this.children},b.prototype.playAudio=function(e){this.$container.closest(".h5p-content").hasClass("using-mouse")&&e&&e.play()},b.prototype.resetAudios=function(){this.players.forEach(function(e){e.pause(),e.load()})},b.ATTENTION_SEEKER_DONE=-1,t.default=b},function(e,t,n){"use strict";function r(e,t){var n=this;n.index=e,n.parent=t}e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(13),o=r(i),a=n(14),s=r(a),c=n(17),l=r(c),u=n(0),d=function(e){function t(e){this.bookMaker=e,this.initProgressbar(),this.initFooter(),this.initTaskAnsweredListener(),this.toggleNextAndPreviousButtonDisabled(this.bookMaker.getCurrentSceneIndex())}return t.prototype.initTaskAnsweredListener=function(){var e=this;this.bookMaker.elementInstances.forEach(function(t,n){t.filter(function(e){return(0,u.isFunction)(e.on)}).forEach(function(t){t.on("xAPI",function(t){var r=t.getVerb();if((0,u.contains)(["interacted","answered","attempted"],r)){e.setTaskAnswered(n,!1)}else"completed"===r&&t.setVerb("answered");void 0===t.data.statement.context.extensions&&(t.data.statement.context.extensions={}),t.data.statement.context.extensions["http://id.tincanapi.com/extension/ending-point"]=n+1})})})},t.prototype.initProgressbar=function(){var t=this,n=this,r=n.bookMaker.previousState&&n.bookMaker.previousState.progress||0;this.progresbarKeyboardControls=new s.default([new l.default]),this.progresbarKeyboardControls.negativeTabIndexAllowed=!0,this.progresbarKeyboardControls.on("select",function(t){n.displayScene(e(t.element).data("sceneNumber"))}),this.progresbarKeyboardControls.on("beforeNextElement",function(e){return e.index!==e.elements.length-1}),this.progresbarKeyboardControls.on("beforePreviousElement",function(e){return 0!==e.index}),void 0!==this.bookMaker.progressbarParts&&this.bookMaker.progressbarParts&&this.bookMaker.progressbarParts.forEach(function(e){n.progresbarKeyboardControls.removeElement(e.children("a").get(0)),e.remove()}),n.bookMaker.progressbarParts=[];for(var i=function(t){t.preventDefault();var r=e(this).data("sceneNumber");n.progresbarKeyboardControls.setTabbableByIndex(r),n.displayScene(r),n.bookMaker.focus()},o=0;o<this.bookMaker.scenes.length;o+=1){var a=this.createSceneTitle(o),c=e("<li>",{class:"h5p-progressbar-part"}).appendTo(n.bookMaker.$progressbar),d=e("<a>",{href:"#",html:'<span class="h5p-progressbar-part-title hidden-but-read">'+a+"</span>",tabindex:"-1"}).data("sceneNumber",o).click(i).appendTo(c);this.progresbarKeyboardControls.addElement(d.get(0)),u.isIOS||function(){var n=e("<div/>",{class:"h5p-progressbar-popup",html:a,"aria-hidden":"true"}).appendTo(c);c.mouseenter(function(){return t.ensurePopupVisible(n)})}(),0===o&&c.addClass("h5p-progressbar-part-show"),o===r&&c.addClass("h5p-progressbar-part-selected"),n.bookMaker.progressbarParts.push(c),this.updateSceneTitle(o)}},t.prototype.ensurePopupVisible=function(e){var t=this.bookMaker.$container.width(),n=e.outerWidth(),r=e.offset().left;r<0?(e.css("left",0),e.css("transform","translateX(0)")):r+n>t&&(e.css("left","auto"),e.css("right",0),e.css("transform","translateX(0)"))},t.prototype.displayScene=function(e){var t=this.bookMaker.getCurrentSceneIndex();this.updateSceneTitle(e,{isCurrent:!0}),this.updateSceneTitle(t,{isCurrent:!1}),this.bookMaker.jumpToScene(e),this.toggleNextAndPreviousButtonDisabled(e)},t.prototype.createSceneTitle=function(e){return this.bookMaker.l10n.scene+" "+(e+1)},t.prototype.initFooter=function(){var t=this,n=this,r=this.bookMaker.$footer;e("<div/>",{class:"h5p-footer-left-adjusted"}).appendTo(r);var i=e("<div/>",{class:"h5p-footer-center-adjusted"}).appendTo(r),a=e("<div/>",{role:"toolbar",class:"h5p-footer-right-adjusted"}).appendTo(r);this.bookMaker.$prevSceneButton=e("<div/>",{class:"h5p-footer-button h5p-footer-previous-scene","aria-label":this.bookMaker.l10n.prevScene,title:this.bookMaker.l10n.prevScene,role:"button",tabindex:"-1","aria-disabled":"true"}).appendTo(i),(0,u.addClickAndKeyboardListeners)(this.bookMaker.$prevSceneButton,function(){return t.bookMaker.previousScene()});var s=e("<div/>",{class:"h5p-footer-scene-count"}).appendTo(i);this.bookMaker.$footerCurrentScene=e("<div/>",{html:"1",class:"h5p-footer-scene-count-current",title:this.bookMaker.l10n.currentScene,"aria-hidden":"true"}).appendTo(s),this.bookMaker.$footerCounter=e("<div/>",{class:"hidden-but-read",html:this.bookMaker.l10n.sceneCount.replace("@index","1").replace("@total",this.bookMaker.scenes.length.toString())}).appendTo(i),e("<div/>",{html:"/",class:"h5p-footer-scene-count-delimiter","aria-hidden":"true"}).appendTo(s),this.bookMaker.$footerMaxScene=e("<div/>",{html:this.bookMaker.scenes.length,class:"h5p-footer-scene-count-max",title:this.bookMaker.l10n.lastScene,"aria-hidden":"true"}).appendTo(s),this.bookMaker.$nextSceneButton=e("<div/>",{class:"h5p-footer-button h5p-footer-next-scene","aria-label":this.bookMaker.l10n.nextScene,title:this.bookMaker.l10n.nextScene,role:"button",tabindex:"0"}).appendTo(i),(0,u.addClickAndKeyboardListeners)(this.bookMaker.$nextSceneButton,function(){return t.bookMaker.nextScene()}),void 0===this.bookMaker.editor&&(this.bookMaker.enablePrintButton&&o.default.supported()&&(this.bookMaker.$printButton=e("<div/>",{class:"h5p-footer-button h5p-footer-print","aria-label":this.bookMaker.l10n.printTitle,title:this.bookMaker.l10n.printTitle,role:"button",tabindex:"0"}).appendTo(a),(0,u.addClickAndKeyboardListeners)(this.bookMaker.$printButton,function(){return n.openPrintDialog()})),H5P.fullscreenSupported&&(this.bookMaker.$fullScreenButton=e("<div/>",{class:"h5p-footer-button h5p-footer-toggle-full-screen","aria-label":this.bookMaker.l10n.fullscreen,title:this.bookMaker.l10n.fullscreen,role:"button",tabindex:"0"}),(0,u.addClickAndKeyboardListeners)(this.bookMaker.$fullScreenButton,function(){return n.bookMaker.toggleFullScreen()}),this.bookMaker.$fullScreenButton.appendTo(a)))},t.prototype.openPrintDialog=function(){var t=this,n=e(".h5p-wrapper");o.default.showDialog(this.bookMaker.l10n,n,function(e){o.default.print(t.bookMaker,n,e)}).children('[role="dialog"]').focus()},t.prototype.updateProgressBar=function(e,t){var n,r=this;for(n=0;n<r.bookMaker.progressbarParts.length;n+=1)e+1>n?r.bookMaker.progressbarParts[n].addClass("h5p-progressbar-part-show"):r.bookMaker.progressbarParts[n].removeClass("h5p-progressbar-part-show");if(r.progresbarKeyboardControls.setTabbableByIndex(e),r.bookMaker.progressbarParts[e].addClass("h5p-progressbar-part-selected").siblings().removeClass("h5p-progressbar-part-selected"),void 0===t)return void r.bookMaker.progressbarParts.forEach(function(e,t){r.setTaskAnswered(t,!1)})},t.prototype.setTaskAnswered=function(e,t){this.bookMaker.progressbarParts[e].find(".h5p-progressbar-part-has-task").toggleClass("h5p-answered",t),this.updateSceneTitle(e)},t.prototype.updateSceneTitle=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isCurrent;this.setSceneTitle(e,{isCurrent:(0,u.defaultValue)(n,this.bookMaker.isCurrentScene(e))})},t.prototype.setSceneTitle=function(e,t){var n=t.isCurrent,r=void 0!==n&&n,i=this.bookMaker.scenes.length,o=this.bookMaker.progressbarParts[e],a=o.find(".h5p-progressbar-part-title"),s=this.bookMaker.l10n.sceneCount.replace("@index",e+1).replace("@total",i),c=r?this.bookMaker.l10n.currentScene:"";a.html(s+": "+c)},t.prototype.updateFooter=function(e){this.bookMaker.$footerCurrentScene.html(e+1),this.bookMaker.$footerMaxScene.html(this.bookMaker.scenes.length),this.bookMaker.$footerCounter.html(this.bookMaker.l10n.sceneCount.replace("@index",(e+1).toString()).replace("@total",this.bookMaker.scenes.length.toString())),this.toggleNextAndPreviousButtonDisabled(e)},t.prototype.toggleNextAndPreviousButtonDisabled=function(e){var t=this.bookMaker.scenes.length-1;this.bookMaker.$prevSceneButton.attr("aria-disabled",(0===e).toString()),this.bookMaker.$nextSceneButton.attr("aria-disabled",(e===t).toString()),this.bookMaker.$prevSceneButton.attr("tabindex",0===e?"-1":"0"),this.bookMaker.$nextSceneButton.attr("tabindex",e===t?"-1":"0")},t}(H5P.jQuery);t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function(e){function t(){}var n=0;return t.supported=function(){return"function"==typeof window.print},t.print=function(t,n,r){t.trigger("printing",{finished:!1,allScenes:r});var i=e(".h5p-scene.h5p-current"),o=i.height(),a=i.width(),s=a/670,c=e(".h5p-scene");c.css({height:o/s+"px",width:"670px",fontSize:Math.floor(100/s)+"%"});var l=n.height();n.css("height","auto"),c.toggleClass("doprint",!0===r),i.addClass("doprint"),setTimeout(function(){window.print(),c.css({height:"",width:"",fontSize:""}),n.css("height",l+"px"),t.trigger("printing",{finished:!0})},500)},t.showDialog=function(t,i,o){var a=this,s=n++,c="h5p-book-maker-print-dialog-"+s+"-title",l="h5p-book-maker-print-dialog-"+s+"-ingress",u=e('<div class="h5p-popup-dialog h5p-print-dialog">\n                      <div role="dialog" aria-labelledby="'+c+'" aria-describedby="'+l+'" tabindex="-1" class="h5p-inner">\n                        <h2 id="'+c+'">'+t.printTitle+'</h2>\n                        <div class="h5p-scroll-content"></div>\n                        <div class="h5p-close" role="button" tabindex="0" title="'+H5P.t("close")+'">\n                      </div>\n                    </div>').insertAfter(i).click(function(){a.close()}).children(".h5p-inner").click(function(){return!1}).end();(0,r.addClickAndKeyboardListeners)(u.find(".h5p-close"),function(){return a.close()});var d=u.find(".h5p-scroll-content");return d.append(e("<div>",{class:"h5p-book-maker-print-ingress",id:l,html:t.printIngress})),H5P.JoubelUI.createButton({html:t.printAllScenes,class:"h5p-book-maker-print-all-scenes",click:function(){a.close(),o(!0)}}).appendTo(d),H5P.JoubelUI.createButton({html:t.printCurrentScene,class:"h5p-book-maker-print-current-scene",click:function(){a.close(),o(!1)}}).appendTo(d),this.open=function(){setTimeout(function(){u.addClass("h5p-open"),H5P.jQuery(a).trigger("dialog-opened",[u])},1)},this.close=function(){u.removeClass("h5p-open"),setTimeout(function(){u.remove()},200)},this.open(),u},t}(H5P.jQuery);t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(15),s=n(3),c=n(16),l=(0,a.removeAttribute)("tabindex"),u=((0,s.forEach)(l),(0,a.setAttribute)("tabindex","0")),d=(0,a.setAttribute)("tabindex","-1"),p=(0,a.hasAttribute)("tabindex"),h=function(){function e(t){r(this,e),i(this,(0,c.Eventful)()),this.plugins=t||[],this.elements=[],this.negativeTabIndexAllowed=!1,this.on("nextElement",this.nextElement,this),this.on("previousElement",this.previousElement,this),this.on("firstElement",this.firstElement,this),this.on("lastElement",this.lastElement,this),this.initPlugins()}return o(e,[{key:"addElement",value:function(e){this.elements.push(e),this.firesEvent("addElement",e),1===this.elements.length&&this.setTabbable(e)}},{key:"insertElementAt",value:function(e,t){this.elements.splice(t,0,e),this.firesEvent("addElement",e),1===this.elements.length&&this.setTabbable(e)}},{key:"removeElement",value:function(e){this.elements=(0,s.without)([e],this.elements),p(e)&&(this.setUntabbable(e),this.elements[0]&&this.setTabbable(this.elements[0])),this.firesEvent("removeElement",e)}},{key:"count",value:function(){return this.elements.length}},{key:"firesEvent",value:function(e,t){var n=this.elements.indexOf(t);return this.fire(e,{element:t,index:n,elements:this.elements,oldElement:this.tabbableElement})}},{key:"nextElement",value:function(e){var t=e.index,n=t===this.elements.length-1,r=this.elements[n?0:t+1];this.setTabbable(r),r.focus()}},{key:"firstElement",value:function(){var e=this.elements[0];this.setTabbable(e),e.focus()}},{key:"lastElement",value:function(){var e=this.elements[this.elements.length-1];this.setTabbable(e),e.focus()}},{key:"setTabbableByIndex",value:function(e){var t=this.elements[e];t&&this.setTabbable(t)}},{key:"setTabbable",value:function(e){(0,s.forEach)(this.setUntabbable.bind(this),this.elements),u(e),this.tabbableElement=e}},{key:"setUntabbable",value:function(e){e!==document.activeElement&&(this.negativeTabIndexAllowed?d(e):l(e))}},{key:"previousElement",value:function(e){var t=e.index,n=0===t,r=this.elements[n?this.elements.length-1:t-1];this.setTabbable(r),r.focus()}},{key:"useNegativeTabIndex",value:function(){this.negativeTabIndexAllowed=!0,this.elements.forEach(function(e){e.hasAttribute("tabindex")||d(e)})}},{key:"initPlugins",value:function(){this.plugins.forEach(function(e){void 0!==e.init&&e.init(this)},this)}}]),e}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createElement=t.toggleClass=t.toggleVisibility=t.show=t.hide=t.removeClass=t.addClass=t.classListContains=t.removeChild=t.querySelectorAll=t.nodeListToArray=t.querySelector=t.appendChild=t.toggleAttribute=t.attributeEquals=t.hasAttribute=t.removeAttribute=t.setAttribute=t.getAttribute=void 0;var r=n(3),i=t.getAttribute=(0,r.curry)(function(e,t){return t.getAttribute(e)}),o=t.setAttribute=(0,r.curry)(function(e,t,n){return n.setAttribute(e,t)}),a=(t.removeAttribute=(0,r.curry)(function(e,t){return t.removeAttribute(e)}),t.hasAttribute=(0,r.curry)(function(e,t){return t.hasAttribute(e)}),t.attributeEquals=(0,r.curry)(function(e,t,n){return n.getAttribute(e)===t}),t.toggleAttribute=(0,r.curry)(function(e,t){var n=i(e,t);o(e,(0,r.inverseBooleanString)(n),t)}),t.appendChild=(0,r.curry)(function(e,t){return e.appendChild(t)}),t.querySelector=(0,r.curry)(function(e,t){return t.querySelector(e)}),t.nodeListToArray=function(e){return Array.prototype.slice.call(e)}),s=(t.querySelectorAll=(0,r.curry)(function(e,t){return a(t.querySelectorAll(e))}),t.removeChild=(0,r.curry)(function(e,t){return e.removeChild(t)}),t.classListContains=(0,r.curry)(function(e,t){return t.classList.contains(e)}),t.addClass=(0,r.curry)(function(e,t){return t.classList.add(e)})),c=t.removeClass=(0,r.curry)(function(e,t){return t.classList.remove(e)}),l=t.hide=s("hidden"),u=t.show=c("hidden");t.toggleVisibility=(0,r.curry)(function(e,t){return(e?u:l)(t)}),t.toggleClass=(0,r.curry)(function(e,t,n){n.classList[t?"add":"remove"](e)}),t.createElement=function(e){var t=e.tag,n=e.id,r=e.classes,i=e.attributes,o=document.createElement(t);return n&&(o.id=n),r&&r.forEach(function(e){o.classList.add(e)}),i&&Object.keys(i).forEach(function(e){o.setAttribute(e,i[e])}),o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Eventful=function(){return{listeners:{},on:function(e,t,n){var r={listener:t,scope:n};return this.listeners[e]=this.listeners[e]||[],this.listeners[e].push(r),this},fire:function(e,t){return(this.listeners[e]||[]).every(function(e){return!1!==e.listener.call(e.scope||this,t)})},propagate:function(e,t){var n=this;e.forEach(function(e){return t.on(e,function(t){return n.fire(e,t)})})}}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e),this.selectability=!0}return i(e,[{key:"init",value:function(e){this.boundHandleKeyDown=this.handleKeyDown.bind(this),this.controls=e,this.controls.on("addElement",this.listenForKeyDown,this),this.controls.on("removeElement",this.removeKeyDownListener,this)}},{key:"listenForKeyDown",value:function(e){e.element.addEventListener("keydown",this.boundHandleKeyDown)}},{key:"removeKeyDownListener",value:function(e){e.element.removeEventListener("keydown",this.boundHandleKeyDown)}},{key:"handleKeyDown",value:function(e){switch(e.which){case 27:this.close(e.target),e.preventDefault(),e.stopPropagation();break;case 35:this.lastElement(e.target),e.preventDefault(),e.stopPropagation();break;case 36:this.firstElement(e.target),e.preventDefault(),e.stopPropagation();break;case 13:case 32:this.select(e.target),e.preventDefault(),e.stopPropagation();break;case 37:case 38:this.hasChromevoxModifiers(e)||(this.previousElement(e.target),e.preventDefault(),e.stopPropagation());break;case 39:case 40:this.hasChromevoxModifiers(e)||(this.nextElement(e.target),e.preventDefault(),e.stopPropagation())}}},{key:"hasChromevoxModifiers",value:function(e){return e.shiftKey||e.ctrlKey}},{key:"previousElement",value:function(e){!1!==this.controls.firesEvent("beforePreviousElement",e)&&(this.controls.firesEvent("previousElement",e),this.controls.firesEvent("afterPreviousElement",e))}},{key:"nextElement",value:function(e){!1!==this.controls.firesEvent("beforeNextElement",e)&&(this.controls.firesEvent("nextElement",e),this.controls.firesEvent("afterNextElement",e))}},{key:"select",value:function(e){this.selectability&&!1!==this.controls.firesEvent("before-select",e)&&(this.controls.firesEvent("select",e),this.controls.firesEvent("after-select",e))}},{key:"firstElement",value:function(e){!1!==this.controls.firesEvent("beforeFirstElement",e)&&(this.controls.firesEvent("firstElement",e),this.controls.firesEvent("afterFirstElement",e))}},{key:"lastElement",value:function(e){!1!==this.controls.firesEvent("beforeLastElement",e)&&(this.controls.firesEvent("lastElement",e),this.controls.firesEvent("afterLastElement",e))}},{key:"disableSelectability",value:function(){this.selectability=!1}},{key:"enableSelectability",value:function(){this.selectability=!0}},{key:"close",value:function(e){!1!==this.controls.firesEvent("before-close",e)&&(this.controls.firesEvent("close",e),this.controls.firesEvent("after-close",e))}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this.params=t||{},this.params.position=t.position||"left",this.params.prefix=t.prefix||"",this.params.label=this.params.label||"Move",this.callbacks=i,this.callbacks.onClick=i.onClick||function(){},this.navigationBar=document.createElement("div"),this.navigationBar.setAttribute("role","button"),this.navigationBar.setAttribute("tabIndex",0),this.navigationBar.setAttribute("aria-label",this.params.label),this.navigationBar.classList.add(this.params.prefix+"-navigation-bar"),this.navigationBar.classList.add(this.params.prefix+"-navigation-bar-"+this.params.position);var o=document.createElement("div");o.classList.add(this.params.prefix+"-navigation-bar-background"),this.navigationBar.appendChild(o),this.navigationBar.addEventListener("click",function(){n.callbacks.onClick()}),this.navigationBar.addEventListener("keypress",function(){n.callbacks.onClick()})}return i(e,[{key:"getDOM",value:function(){return this.navigationBar}},{key:"show",value:function(){this.navigationBar.classList.add(this.params.prefix+"-navigation-bar-visible")}},{key:"hide",value:function(){this.navigationBar.classList.remove(this.params.prefix+"-navigation-bar-visible")}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=function e(t){r(this,e);var n=t.book;n=i.jQuery.extend(!0,{globalBackgroundSelector:{fillGlobalBackground:"",imageGlobalBackground:{}},scenes:[{sceneBackgroundSelector:{fill:"",image:{}}}]},n);var o=function(e,n,r){var i=t.$scenesWrapper.children();void 0!==r&&(i=i.eq(r)),e&&""!==e?i.addClass("has-background").css("background-image","").css("background-color",e):n&&n.path&&i.addClass("has-background").css("background-color","").css("background-image","url("+H5P.getPath(n.path,t.contentId)+")")};!function(){var e=n.globalBackgroundSelector;o(e.fillGlobalBackground,e.imageGlobalBackground)}(),function(){n.scenes.forEach(function(e,t){var n=e.sceneBackgroundSelector;n&&o(n.fill,n.image,t)})}()};t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=this;t.paperCorners={left:{element:{attentionSeeker:o({},e.attentionSeeker)}},right:{element:{attentionSeeker:o({},e.attentionSeeker)}}},l.default.call(t,s.default,e.elements);var n=void 0;t.getElement=function(){return n||(n=H5P.jQuery(i.createHTML(e))),t.parent.isEditor()||(t.index>0&&(t.paperCorners.left.dom=document.createElement("div"),t.paperCorners.left.dom.classList.add("h5p-book-maker-paper"),t.paperCorners.left.dom.classList.add("h5p-book-maker-left"),n.append(t.paperCorners.left.dom)),t.index<t.parent.getChildren().length-1&&(t.paperCorners.right.dom=document.createElement("div"),t.paperCorners.right.dom.classList.add("h5p-book-maker-paper"),t.paperCorners.right.dom.classList.add("h5p-book-maker-right"),n.append(t.paperCorners.right.dom))),n},t.getCorner=function(e){if("left"===e||"right"===e)return t.paperCorners[e]},t.getCorners=function(){return t.paperCorners},t.setCurrent=function(){this.parent.$current=n.addClass("h5p-current")},t.appendElements=function(){for(var r=0;r<t.children.length;r++)t.parent.attachElement(e.elements[r],t.children[r].instance,n,t.index);t.parent.elementsAttached[t.index]=!0,t.parent.trigger("domChanged",{$target:n,library:"BookMaker",key:"newScene"},{bubbles:!0,external:!0})}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(21),s=r(a),c=n(2),l=r(c);i.createHTML=function(e){return'<div role="document" class="h5p-scene"'+(void 0!==e.background?' style="background:'+e.background+'"':"")+"></div>"},t.default=i},function(e,t,n){"use strict";function r(e){var t,n=this;t=n.parent.parent.isEditor()?H5P.jQuery.extend(!0,{},e.action,n.parent.parent.elementsOverride):H5P.jQuery.extend(!0,e.action,n.parent.parent.elementsOverride),t.params.autoplay?(t.params.autoplay=!1,t.params.bookMakerAutoplay=!0):t.params.playback&&t.params.playback.autoplay?(t.params.playback.autoplay=!1,t.params.bookMakerAutoplay=!0):t.params.media&&t.params.media.params&&t.params.media.params.playback&&t.params.media.params.playback.autoplay?(t.params.media.params.playback.autoplay=!1,t.params.bookMakerAutoplay=!0):t.params.media&&t.params.media.params&&t.params.media.params.autoplay?(t.params.media.params.autoplay=!1,t.params.bookMakerAutoplay=!0):t.params.override&&t.params.override.autoplay&&(t.params.override.autoplay=!1,t.params.bookMakerAutoplay=!0);var r=n.parent.parent.elementInstances[n.parent.index]?n.parent.parent.elementInstances[n.parent.index].length:0;if(n.parent.parent.previousState&&n.parent.parent.previousState.answers&&n.parent.parent.previousState.answers[n.parent.index]&&n.parent.parent.previousState.answers[n.parent.index][r]&&(t.userDatas={state:n.parent.parent.previousState.answers[n.parent.index][r]}),t.params=t.params||{},n.instance=H5P.newRunnable(t,n.parent.parent.contentId,void 0,!0,{parent:n.parent.parent}),void 0!==n.instance.preventResize&&(n.instance.preventResize=!0),void 0===n.parent.parent.elementInstances[n.parent.index]?n.parent.parent.elementInstances[n.parent.index]=[n.instance]:n.parent.parent.elementInstances[n.parent.index].push(n.instance),"H5P.Audio"===t.library.split(" ")[0]&&e.canBeChangedByUser&&n.parent.parent.audioReferences.push({instance:n.instance,id:n.parent.parent.audioReferences.length+1}),"H5P.AudioRecorderBookMaker"===t.library.split(" ")[0]){var i=n.parent.parent.audioReferences.shift();n.instance.bookmakerReferenceId=i.id,n.instance.on("recordingdone",function(e){e.data.id===i.id&&(i.instance.audio.src=e.data.url,i.instance.audio.load(),document.querySelector(".h5p-close-popup").click())})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r}]);