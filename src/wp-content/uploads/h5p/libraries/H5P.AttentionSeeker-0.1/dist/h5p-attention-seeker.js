(()=>{"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}const t=function(){function t(){}return t.extend=function(){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&("object"===e(arguments[0][n])&&"object"===e(arguments[t][n])?this.extend(arguments[0][n],arguments[t][n]):arguments[0][n]=arguments[t][n]);return arguments[0]},t}();var n=function(){function e(e,n){if("number"!=typeof e.id||e.id<0||!e.element)return null;this.params=t.extend({style:"bounce",interval:1e4,repeat:1},e),this.callbacks=n||{},this.callbacks.onAnimationStarted=n.onAnimationStarted||function(){},this.callbacks.onAnimationEnded=n.onAnimationEnded||function(){},this.callbacks.onWorkerRemoved=n.onWorkerRemoved||function(){},this.animationEndListener=null,this.params.element.classList.add("h5p-attention-seeker"),this.params.element.classList.add("h5p-attention-seeker-".concat(this.params.style)),this.highlightElement=document.createElement("div"),this.highlightElement.classList.add("h5p-attention-seeker-highlight-element"),this.params.element.appendChild(this.highlightElement)}var n=e.prototype;return n.run=function(){var e=this;this.params.repeat<=0||(this.animationEndListener||(this.animationEndListener=this.handleAnimationEnded.bind(this),this.params.element.addEventListener("animationend",this.animationEndListener)),clearTimeout(this.currentTimeout),this.currentTimeout=setTimeout((function(){e.started(),e.params.repeat--,e.params.repeat>0&&e.run()}),this.params.interval))},n.pause=function(){clearTimeout(this.currentTimeout),this.params.element.classList.contains("h5p-attention-seeker-animation")&&this.ended()},n.remove=function(){clearTimeout(this.currentTimeout),(this.params.element.classList.contains("h5p-attention-seeker-animation")||this.params.element.classList.contains("h5p-attention-seeker-preparation"))&&this.ended(),this.params.element.classList.remove("h5p-attention-seeker"),this.params.element.classList.remove("h5p-attention-seeker-".concat(this.params.style)),this.params.element.classList.remove("h5p-attention-seeker-preparation"),this.params.element.classList.remove("h5p-attention-seeker-animation"),this.params.element.removeEventListener("animationend",this.animationEndListener),this.highlightElement.parentNode===this.params.element&&this.params.element.removeChild(this.highlightElement),this.callbacks.onWorkerRemoved(this.params.id)},n.started=function(){var e=this;this.params.element.classList.add("h5p-attention-seeker-preparation"),this.callbacks.onAnimationStarted(this.params.id),setTimeout((function(){e.params.element.classList.add("h5p-attention-seeker-animation")}),0)},n.ended=function(){this.params.element.classList.remove("h5p-attention-seeker-preparation"),this.params.element.classList.remove("h5p-attention-seeker-animation"),this.callbacks.onAnimationEnded(this.params.id),this.params.repeat<=0&&this.remove()},n.handleAnimationEnded=function(e){e.animationName===this.params.style&&this.ended()},e}();var i=function(e){var t,i;function r(){var t;return(t=e.call(this)||this).workers=[],t}i=e,(t=r).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var a=r.prototype;return a.register=function(e){var t=this;if(e.element){var i=0===this.workers.length?0:this.workers[this.workers.length-1].id+1,r=new n({id:i,element:e.element,style:e.style,interval:e.interval,repeat:e.repeat},{onAnimationStarted:function(e){t.handleAnimationStarted(e)},onAnimationEnded:function(e){t.handleAnimationEnded(e)},onWorkerRemoved:function(e){t.handleWorkerRemoved(e)}});return this.workers.push({id:i,worker:r}),e.options&&e.options.runWorker&&r.run(),i}},a.unregister=function(e){if(!("number"!=typeof e||e<0)){var t=this.workers.filter((function(t){return t.id===e}));t.length>0&&(t[0].worker.remove(),this.workers=this.workers.filter((function(t){return t.id!==e})))}},a.unregisterAll=function(){this.workers.forEach((function(e){e.worker.remove(e.id)}))},a.run=function(e){if(!("number"!=typeof e||e<0)){var t=this.workers.filter((function(t){return t.id===e}));t.length>0&&(t[0].worker.run(),this.handleWorkerRun(e))}},a.pause=function(e){if(!("number"!=typeof e||e<0)){var t=this.workers.filter((function(t){return t.id===e}));t.length>0&&(t[0].worker.pause(),this.handleWorkerPause(e))}},a.handleAnimationStarted=function(e){this.trigger("started",e)},a.handleAnimationEnded=function(e){this.trigger("ended",e)},a.handleWorkerRun=function(e){this.trigger("run",e)},a.handleWorkerPause=function(e){this.trigger("pause",e)},a.handleWorkerRemoved=function(e){this.workers=this.workers.filter((function(t){return t.id!==e})),this.trigger("removed",e)},r}(H5P.EventDispatcher);H5P=H5P||{},H5P.AttentionSeeker=i})();