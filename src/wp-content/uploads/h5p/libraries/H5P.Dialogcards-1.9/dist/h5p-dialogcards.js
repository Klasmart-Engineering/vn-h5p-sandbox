!function(){"use strict";var t=H5P.jQuery,e=function(){function e(e,r,a,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return this.card=e,this.params=r||{},this.id=a,this.contentId=i,this.callbacks=n,this.card.back.useImageFromFront&&(this.card.back.image=this.card.front.image,this.card.back.imageAltText=this.card.front.imageAltText),this.card.back.useAudioFromFront&&(this.card.back.audio=this.card.front.audio),this.audios={},this.$audioWrappers={},this.$cardWrapper=t("<div>",{class:"h5p-dialogcards-cardwrap",role:"group",tabindex:"-1"}),"repetition"!==this.params.mode&&this.$cardWrapper.attr("aria-labelledby","h5p-dialogcards-progress-"+H5P.Dialogcards.idCounter),this.$cardHolder=t("<div>",{class:"h5p-dialogcards-cardholder"}).appendTo(this.$cardWrapper),this.createCardContent(e).appendTo(this.$cardHolder),this}var r=e.prototype;return r.createCardContent=function(e){var r=t("<div>",{class:"h5p-dialogcards-card-content"});this.$imageWrapper=t("<div>",{class:"h5p-dialogcards-image-wrapper"}),this.createCardImage(e,"front").appendTo(this.$imageWrapper),this.createCardImage(e,"back").appendTo(this.$imageWrapper),this.$imageWrapper.appendTo(r);var a=t("<div>",{class:"h5p-dialogcards-card-text-wrapper"}).appendTo(r),i=t("<div>",{class:"h5p-dialogcards-card-text-inner"}).appendTo(a),n=t("<div>",{class:"h5p-dialogcards-card-text-inner-content"}).appendTo(i);this.$audioWrappers.front=this.createCardAudio(e,"front").appendTo(n),this.$audioWrappers.back=this.createCardAudio(e,"back").appendTo(n);var o=t("<div>",{class:"h5p-dialogcards-card-text"}).appendTo(n);return this.$cardTextArea=t("<div>",{class:"h5p-dialogcards-card-text-area",tabindex:"-1",html:e.front.text}).appendTo(o),this.createCardFooter().appendTo(a),r},r.createCardImage=function(e,r){var a;return void 0!==e[r].image?((a=t('<img class="h5p-dialogcards-image" src="'+H5P.getPath(e[r].image.path,this.contentId)+'"/>')).addClass("h5p-dialogcards-image-".concat(r)),a.get(0).addEventListener("dragstart",(function(t){t.preventDefault()})),a.get(0).addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),a.css({"user-select":"none","-webkit-user-select":"none","-webkit-touch-callout":"none"}),e[r].imageAltText&&a.attr("alt",e[r].imageAltText)):a=t('<div class="h5p-dialogcards-image"></div>'),a},r.createCardAudio=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"front",a=t("<div>").addClass("h5p-dialogcards-audio-wrapper").addClass("h5p-dialogcards-audio-wrapper-".concat(r));if(e[r].text&&""!==e[r].text||a.addClass("h5p-no-text"),void 0!==e[r].audio){var i={files:e[r].audio,audioNotSupported:this.params.audioNotSupported},n=new H5P.Audio(i,this.contentId);this.audios[r]=n,n.attach(a),n.audio&&n.audio.preload&&(n.audio.preload="none")}else a.addClass("hide");return a},r.createCardFooter=function(){var e=t("<div>",{class:"h5p-dialogcards-card-footer"}),r="h5p-dialogcards-button-hidden",a="-1";return"repetition"===this.params.mode&&(r="",this.params.behaviour.quickProgression&&(r="h5p-dialogcards-quick-progression",a="0"),e.addClass("h5p-repetition")),this.$buttonTurn=H5P.JoubelUI.createButton({class:"h5p-dialogcards-turn",html:this.params.answer}).appendTo(e),this.$buttonShowSummary=H5P.JoubelUI.createButton({class:"h5p-dialogcards-show-summary h5p-dialogcards-button-gone",html:this.params.showSummary}).appendTo(e),this.$buttonIncorrect=H5P.JoubelUI.createButton({class:"h5p-dialogcards-answer-button",html:this.params.incorrectAnswer}).addClass("incorrect").addClass(r).attr("tabindex",a).appendTo(e),this.$buttonCorrect=H5P.JoubelUI.createButton({class:"h5p-dialogcards-answer-button",html:this.params.correctAnswer}).addClass("correct").addClass(r).attr("tabindex",a).appendTo(e),e},r.highlightButton=function(t,e){"correct"!==t&&"incorrect"!==t||"boolean"!=typeof e||("correct"===t&&this.$buttonCorrect?this.$buttonCorrect.toggleClass("selected",e):"incorrect"===t&&this.$buttonIncorrect&&this.$buttonIncorrect.toggleClass("selected",e))},r.createButtonListeners=function(){var t=this;this.$buttonIncorrect.unbind("click").click((function(e){e.target.classList.contains("h5p-dialogcards-quick-progression")&&t.callbacks.onNextCard({cardId:t.id,result:!1})})),this.$buttonTurn.unbind("click").click((function(){t.turnCard()})),this.$buttonCorrect.unbind("click").click((function(e){e.target.classList.contains("h5p-dialogcards-quick-progression")&&t.callbacks.onNextCard({cardId:t.id,result:!0})}))},r.showSummaryButton=function(t){this.getDOM().find(".h5p-dialogcards-answer-button").addClass("h5p-dialogcards-button-hidden").attr("tabindex","-1"),this.$buttonTurn.addClass("h5p-dialogcards-button-gone"),this.$buttonShowSummary.click((function(){return t()})).removeClass("h5p-dialogcards-button-gone").focus()},r.hideSummaryButton=function(){"normal"!==this.params.mode&&(this.getDOM().find(".h5p-dialogcards-answer-button").removeClass("h5p-dialogcards-button-hidden").attr("tabindex","0"),this.$buttonTurn.removeClass("h5p-dialogcards-button-gone"),this.$buttonShowSummary.addClass("h5p-dialogcards-button-gone"))},r.turnCard=function(){var t=this,e=this.getDOM(),r=e.find(".h5p-dialogcards-card-content"),a=e.find(".h5p-dialogcards-cardholder").addClass("h5p-dialogcards-collapse");r.find(".joubel-tip-container").remove(),setTimeout((function(){var i=t.isTurned();if(r.toggleClass("h5p-dialogcards-turned",!i),a.removeClass("h5p-dialogcards-collapse"),t.changeText(i?t.getText():t.getAnswer()),t.stopAudio(),"repetition"===t.params.mode&&!t.params.behaviour.quickProgression){var n=e.find(".h5p-dialogcards-answer-button");!1===n.hasClass("h5p-dialogcards-quick-progression")&&n.addClass("h5p-dialogcards-quick-progression").attr("tabindex",0)}setTimeout((function(){t.addTipToCard(r,i?"front":"back"),"function"==typeof t.callbacks.onCardTurned&&t.callbacks.onCardTurned(i)}),200),t.resizeOverflowingText(),t.$cardTextArea.focus()}),200)},r.changeText=function(t){this.$cardTextArea.html(t),this.$cardTextArea.toggleClass("hide",!t||!t.length)},r.setProgressText=function(t,e){if("repetition"===this.params.mode){var r=this.params.progressText.replace("@card",t.toString()).replace("@total",e.toString());this.$cardWrapper.attr("aria-label",r)}},r.resizeOverflowingText=function(){if(this.params.behaviour.scaleTextNotCard){var t=this.getDOM().find(".h5p-dialogcards-card-text"),e=t.children();this.resizeTextToFitContainer(t,e)}},r.resizeTextToFitContainer=function(t,r){if(r.css("font-size",""),90===window.orientation){var a=this.getDOM().find(".h5p-dialogcards-card-text-inner").get(0);if(a.clientHeight<a.scrollHeight)for(var i=parseFloat(r.css("font-size"));i>e.MINSCALE&&a.clientHeight<a.scrollHeight;)i-=e.SCALEINTERVAL,r.css("font-size","".concat(i,"px"))}else{var n=t.get(0).getBoundingClientRect().height,o=r.get(0).getBoundingClientRect().height,s=parseFloat(t.css("font-size")),d=parseFloat(r.css("font-size")),c=this.getDOM().closest(".h5p-container"),l=parseFloat(c.css("font-size"));if(o>n)for(var u=!0;u;){if((d-=e.SCALEINTERVAL)<e.MINSCALE){u=!1;break}r.css("font-size",d/s+"em"),(o=r.get(0).getBoundingClientRect().height)<=n&&(u=!1)}else for(var h=!0;h;){if((d+=e.SCALEINTERVAL)>l){h=!1;break}r.css("font-size",d/s+"em"),(o=r.get(0).getBoundingClientRect().height)>=n&&(h=!1,d-=e.SCALEINTERVAL,r.css("font-size",d/s+"em"))}}},r.addTipToCard=function(t,e,r){"back"!==e&&(e="front"),void 0===r&&(r=this.id),t.find(".joubel-tip-container").remove();var a=(this.card[e].tip||"").trim();a.length&&t.find(".h5p-dialogcards-card-text-wrapper .h5p-dialogcards-card-text-inner").after(H5P.JoubelUI.createTip(a,{tipLabel:this.params.tipButtonLabel}))},r.setCardFocus=function(t){if(!0===t)this.$cardTextArea.focus();else{var e=this.getDOM();e.one("transitionend",(function(){e.focus()}))}},r.stopAudio=function(){var t=this;["front","back"].forEach((function(e){t.audios[e]&&t.audios[e].audio&&(t.audios[e].audio.duration>0&&(t.audios[e].audio.pause(),t.audios[e].audio.currentTime=Math.floor(t.audios[e].audio.duration)),t.audios[e].audio.load&&setTimeout((function(){t.audios[e].audio.load()}),100))}))},r.getDOM=function(){return this.$cardWrapper},r.setNoText=function(){this.getDOM().addClass("h5p-no-text")},r.getText=function(){return this.card.front.text},r.getAnswer=function(){return this.card.back.text},r.getImageWrapper=function(){return this.$imageWrapper},r.setImageHeight=function(t){this.$imageWrapper.css("height",t)},r.getAudio=function(){return this.isTurned()?this.$audioWrappers.back:this.$audioWrappers.front},r.isTurned=function(){return this.getDOM().find(".h5p-dialogcards-card-content").hasClass("h5p-dialogcards-turned")},r.reset=function(){var t=this.getDOM();t.removeClass("h5p-dialogcards-previous"),t.removeClass("h5p-dialogcards-current"),this.changeText(this.getText());var e=t.find(".h5p-dialogcards-card-content");e.removeClass("h5p-dialogcards-turned"),this.addTipToCard(e,"front",this.id),this.params.behaviour.quickProgression||t.find(".h5p-dialogcards-answer-button").removeClass("h5p-dialogcards-quick-progression"),this.hideSummaryButton()},e}();e.SCALEINTERVAL=.2,e.MAXSCALE=16,e.MINSCALE=4;var r=e,a=function(){function t(t,e,r){var a=this;return this.params=t,this.contentId=e,this.callbacks=r,this.cards=[],this.params.dialogs.forEach((function(t,e){t.id=e,a.cards.push(e)})),this}var e=t.prototype;return e.getCard=function(t){if(!(t<0||t>this.cards.length))return"number"==typeof this.cards[t]&&this.loadCard(t),this.cards[t]},e.getCardIds=function(){return this.cards.map((function(t,e){return e}))},e.loadCard=function(t){t<0||t>this.cards.length||"number"==typeof this.cards[t]&&(this.cards[t]=new r(this.params.dialogs[t],this.params,t,this.contentId,this.callbacks))},t}();function i(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}var o=function(){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.cards=t.filter((function(e,r){return t.indexOf(e)>=r})),this}var e=t.prototype;return e.getCards=function(){return this.cards},e.peek=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e=Math.max(0,e),"top"===t&&(t=0),"bottom"===t&&(t=this.cards.length-e),t<0||t>this.cards.length-1?[]:this.cards.slice(t,t+e)},e.add=function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top";"number"==typeof t&&(t=[t]),t.forEach((function(a){var n;-1===e.cards.indexOf(a)&&("top"===r?r=0:"bottom"===r?r=e.cards.length:"random"===r&&(r=Math.floor(Math.random()*e.cards.length)),(n=e.cards).splice.apply(n,[r,0].concat(i(t))))}))},e.push=function(t){this.add(t,"top")},e.pull=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top";return t=Math.max(1,Math.min(t,this.cards.length)),"top"===e&&(e=0),"bottom"===e&&(e=-t),e=Math.max(0,Math.min(e,this.cards.length-1)),this.cards.splice(e,t)},e.remove=function(t){var e=this;"number"==typeof t&&(t=[t]),t.forEach((function(t){var r=e.cards.indexOf(t);r>-1&&e.cards.splice(r,1)}))},e.shuffle=function(){for(var t=this.cards.length-1;t>0;t--){var e=Math.floor(Math.random()*(t+1)),r=[this.cards[e],this.cards[t]];this.cards[t]=r[0],this.cards[e]=r[1]}return this.cards},e.contains=function(t){return-1!==this.cards.indexOf(t)},e.length=function(){return this.cards.length},t}(),s=o;function d(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}var l=function(){function t(t,e,r){return this.params=t,this.cardPool=new a(t,e,r),this.reset(t.cardPiles),this}var e=t.prototype;return e.createSelection=function(){var t=[];if("repetition"===this.params.mode)t=this.createSelectionRepetition();else t=this.cardPool.getCardIds();return t},e.createPiles=function(t){if(t)this.cardPiles=t.map((function(t){return new s(t.cards)}));else{this.cardPiles=[];var e=this.cardPool.getCardIds();switch(this.params.mode){case"repetition":for(var r=0;r<this.params.behaviour.maxProficiency;r++)0===r?this.cardPiles.push(new s(e)):this.cardPiles.push(new s);break;case"normal":this.cardPiles.push(new s(e))}}},e.updatePiles=function(t){var e=this;return t.forEach((function(t){var r=e.find(t.cardId);if(-1!==r){var a=!0===t.result?r+1:0;a=Math.max(0,Math.min(a,e.cardPiles.length-1)),e.cardPiles[r].remove(t.cardId),e.cardPiles[a].add(t.cardId,"bottom")}})),this.getPileSizes()},e.createSelectionRepetition=function(){for(var t=[],e=null,r=0;r<this.cardPiles.length-1;r++){var a,i=this.cardPiles[r].length();if(null!==e||0!==i){null===e&&(e=r);var n=Math.ceil(1*i/(1+r-e)),o=this.cardPiles[r].peek(0,n);t=(a=t).concat.apply(a,d(o))}}return t=this.shuffle(t)},e.shuffle=function(t){for(var e=t.slice(),r=e.length-1;r>0;r--){var a=Math.floor(Math.random()*(r+1)),i=[e[a],e[r]];e[r]=i[0],e[a]=i[1]}return e},e.find=function(t){var e=-1;return this.cardPiles.forEach((function(r,a){if(-1!==e)return e;r.contains(t)&&(e=a)})),e},e.reset=function(t){this.createPiles(t)},e.getCard=function(t){return this.cardPool.getCard(t)},e.getSize=function(){return this.cardPool.getCardIds().length},e.getPiles=function(){return this.cardPiles},e.getPileSizes=function(){return this.cardPiles.map((function(t){return t.length()}))},t}(),u=function(){function t(t,e){var r=this;this.params=t,this.callbacks=e,this.currentCallback=e.nextRound,this.fields=[],this.container=document.createElement("div"),this.container.classList.add("h5p-dialogcards-summary-screen");var a=this.createContainerDOM(t.summary);this.fields.round=a.getElementsByClassName("h5p-dialogcards-summary-subheader")[0],this.fields["h5p-dialogcards-round-cards-right"]=this.addTableRow(a,{category:this.params.summaryCardsRight,symbol:"h5p-dialogcards-check"}),this.fields["h5p-dialogcards-round-cards-wrong"]=this.addTableRow(a,{category:this.params.summaryCardsWrong,symbol:"h5p-dialogcards-times"}),this.fields["h5p-dialogcards-round-cards-not-shown"]=this.addTableRow(a,{category:this.params.summaryCardsNotShown});var i=this.createContainerDOM(t.summaryOverallScore);this.fields["h5p-dialogcards-overall-cards-completed"]=this.addTableRow(i,{category:this.params.summaryCardsCompleted,symbol:"h5p-dialogcards-check"}),this.fields["h5p-dialogcards-overall-completed-rounds"]=this.addTableRow(i,{category:this.params.summaryCompletedRounds,symbol:""});var n=document.createElement("div");n.classList.add("h5p-dialogcards-summary-message"),this.fields.message=n;var o=H5P.JoubelUI.createButton({class:"h5p-dialogcards-buttonNextRound",title:this.params.nextRound.replace("@round",2),html:this.params.nextRound.replace("@round",2)}).click(this.currentCallback).get(0);this.fields.button=o;var s=H5P.JoubelUI.createButton({class:"h5p-dialogcards-button-restart",title:this.params.startOver,html:this.params.startOver}).get(0),d=this.createConfirmationDialog({l10n:this.params.confirmStartingOver,instance:this},(function(){setTimeout((function(){r.callbacks.retry()}),100)}));s.addEventListener("click",(function(t){d.show(t.target.offsetTop)})),this.fields.buttonStartOver=s;var c=document.createElement("div");return c.classList.add("h5p-dialogcards-summary-footer"),c.appendChild(s),c.appendChild(o),this.container.appendChild(a),this.container.appendChild(i),this.container.appendChild(n),this.container.appendChild(c),this.hide(),this}var e=t.prototype;return e.getDOM=function(){return this.container},e.createContainerDOM=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=document.createElement("div");r.classList.add("h5p-dialogcards-summary-container");var a=document.createElement("div");a.classList.add("h5p-dialogcards-summary-header"),a.innerHTML=t,r.appendChild(a);var i=document.createElement("div");i.classList.add("h5p-dialogcards-summary-subheader"),i.innerHTML=e,r.appendChild(i);var n=document.createElement("table");return n.classList.add("h5p-dialogcards-summary-table"),r.appendChild(n),r},e.addTableRow=function(t,e){var r=t.getElementsByClassName("h5p-dialogcards-summary-table")[0],a=document.createElement("tr"),i=document.createElement("td");i.classList.add("h5p-dialogcards-summary-table-row-category"),i.innerHTML=e.category,a.appendChild(i);var n=document.createElement("td");n.classList.add("h5p-dialogcards-summary-table-row-symbol"),void 0!==e.symbol&&""!==e.symbol&&n.classList.add(e.symbol),a.appendChild(n);var o=document.createElement("td");return o.classList.add("h5p-dialogcards-summary-table-row-score"),a.appendChild(o),r.appendChild(a),o},e.update=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.done,a=void 0!==r&&r,i=e.round,n=void 0===i?void 0:i,o=e.message,s=void 0===o?void 0:o,d=e.results,c=void 0===d?[]:d;!0===a?(this.fields.buttonStartOver.classList.add("h5p-dialogcards-button-gone"),this.params.behaviour.enableRetry?(this.fields.button.classList.remove("h5p-dialogcards-button-next-round"),this.fields.button.classList.add("h5p-dialogcards-button-restart"),this.fields.button.innerHTML=this.params.retry,this.fields.button.title=this.params.retry,this.currentCallback=this.callbacks.retry):this.fields.button.classList.add("h5p-dialogcards-button-gone")):(this.fields.buttonStartOver.classList.remove("h5p-dialogcards-button-gone"),this.fields.button.classList.add("h5p-dialogcards-button-next-round"),this.fields.button.classList.remove("h5p-dialogcards-button-restart"),this.fields.button.innerHTML=this.params.nextRound,this.fields.button.title=this.params.nextRound,this.currentCallback=this.callbacks.nextRound),H5P.jQuery(this.fields.button).unbind("click").click(this.currentCallback),this.fields.round.innerHTML=this.params.round.replace("@round",n),a||void 0===n||(this.fields.button.innerHTML=this.params.nextRound.replace("@round",n+1),this.fields.button.title=this.params.nextRound.replace("@round",n+1)),a&&void 0!==s&&""!==s?(this.fields.message.classList.remove("h5p-dialogcards-gone"),this.fields.message.innerHTML=s):this.fields.message.classList.add("h5p-dialogcards-gone"),c.forEach((function(e){var r=void 0!==e.score.value?e.score.value:"";void 0!==e.score.max&&(r="".concat(r,'&nbsp;<span class="h5p-dialogcards-summary-table-row-score-divider">/</span>&nbsp;').concat(e.score.max)),t.fields[e.field].innerHTML=r}))},e.show=function(){this.container.classList.remove("h5p-dialogcards-gone"),this.fields.button.focus()},e.hide=function(){this.container.classList.add("h5p-dialogcards-gone")},e.createConfirmationDialog=function(t,e){t=t||{};var r=new H5P.ConfirmationDialog({instance:t.instance,headerText:t.l10n.header,dialogText:t.l10n.body,cancelText:t.l10n.cancelLabel,confirmText:t.l10n.confirmLabel});return r.on("confirmed",(function(){e()})),r.appendTo(this.getContainer()),r},e.getContainer=function(){var t=H5P.jQuery('[data-content-id="'+self.contentId+'"].h5p-content'),e=t.parents(".h5p-container");return(0!==e.length?e.last():0!==t.length?t:H5P.jQuery(document.body)).get(0)},t}(),h=u;function p(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g(t,e){return g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},g(t,e)}var m=H5P.jQuery,f=H5P.JoubelUI,v=function(t){var e,r;function a(e,r,i){var n;return a.idCounter++,(n=t.call(this)||this).contentId=n.id=r,n.previousState=i.previousState||{},n.contentData=i||{},e.dialogs=e.dialogs||[],e.dialogs=e.dialogs.filter((function(t){if(!t.front||!t.back)return!1;if(!t.front.text&&!t.front.image&&!t.front.audio)return!1;var e=!t.back.text,r=t.back.useImageFromFront&&!t.front.image||!t.back.useImageFromFront&&!t.back.image,a=t.back.useAudioFromFront&&!t.front.audio||!t.back.useAudioFromFront&&!t.back.audio;return!(e&&r&&a)})),n.params=m.extend(!0,{title:"",mode:"normal",description:"Sit in pairs and make up sentences where you include the expressions below.<br/>Example: I should have said yes, HOWEVER I kept my mouth shut.",next:"Next",prev:"Previous",retry:"Retry",answer:"Turn",correctAnswer:"I got it right!",incorrectAnswer:"I got it wrong",round:"Round @round",cardsLeft:"Cards left: @number",nextRound:"Proceed to round @round",startOver:"Start over",showSummary:"Next",summary:"Summary",summaryCardsRight:"Cards you got right:",summaryCardsWrong:"Cards you got wrong:",summaryCardsNotShown:"Cards in pool not shown:",summaryOverallScore:"Overall Score",summaryCardsCompleted:"Cards you have completed learning:",summaryCompletedRounds:"Completed rounds:",summaryAllDone:"Well done! You got all @cards cards correct @max times in a row each!",progressText:"Card @card of @total",cardFrontLabel:"Card front",cardBackLabel:"Card back",tipButtonLabel:"Show tip",audioNotSupported:"Your browser does not support this audio",confirmStartingOver:{header:"Start over?",body:"All progress will be lost. Are you sure you want to start over?",cancelLabel:"Cancel",confirmLabel:"Start over"},dialogs:[{front:{text:"Horse"},back:{text:"Hest",useImageFromFront:!0,useAudioFromFront:!1}}],behaviour:{enableRetry:!0,disableBackwardsNavigation:!1,scaleTextNotCard:!1,randomCards:!1,maxProficiency:5,quickProgression:!1}},e),n.hasNoTexts=n.params.dialogs.every((function(t){return""===t.front.text&&""===t.back.text})),n.hasNoAudios=!n.params.dialogs.some((function(t){return t.front.audio||t.back.audio&&!t.back.useAudioFromFront})),n.cards=[],n.currentCardId=0,n.round=0,n.results=n.previousState.results||[],screen.orientation?screen.orientation.addEventListener("change",(function(){n.handleOrientationChange()})):window.addEventListener("orientationchange",(function(){n.handleOrientationChange()})),window.addEventListener("resize",(function(){n.resize()})),n.attach=function(t){n.$inner=t.addClass("h5p-dialogcards"),n.params.behaviour.scaleTextNotCard&&t.addClass("h5p-text-scaling"),n.$inner.get(0).addEventListener("dragstart",(function(t){t.preventDefault()}));var e={mode:n.params.mode,dialogs:n.params.dialogs,audioNotSupported:n.params.audioNotSupported,answer:n.params.answer,showSummary:n.params.showSummary,incorrectAnswer:n.params.incorrectAnswer,correctAnswer:n.params.correctAnswer,progressText:n.params.progressText,tipButtonLabel:n.params.tipButtonLabel,behaviour:{scaleTextNotCard:n.params.behaviour.scaleTextNotCard,maxProficiency:n.params.behaviour.maxProficiency,quickProgression:n.params.behaviour.quickProgression},cardPiles:n.previousState.cardPiles};n.cardManager=new l(e,n.id,{onCardTurned:n.handleCardTurned,onNextCard:n.nextCard}),n.createDOM(0===n.round),void 0!==n.previousState.currentCardId&&(n.gotoCard(n.previousState.currentCardId),"repetition"===n.params.mode&&n.results.length===n.cardIds.length&&n.showSummary(!0)),n.updateNavigation(),n.trigger("resize")},n.createDOM=function(t){if(n.cardIds=t&&n.previousState.cardIds?n.previousState.cardIds:n.cardManager.createSelection(),n.cardPoolSize=n.cardPoolSize||n.cardManager.getSize(),!0===t){var e=m("<div>"+n.params.title+"</div>").text().trim();n.$header=m((e?'<div class="h5p-dialogcards-title"><div class="h5p-dialogcards-title-inner">'+n.params.title+"</div></div>":"")+'<div class="h5p-dialogcards-description">'+n.params.description+"</div>"),n.summaryScreen=new h(n.params,{nextRound:n.nextRound,retry:n.restartRepetition})}!0===t?n.$cardwrapperSet=n.initCards(n.cardIds):(n.$cardwrapperSet.detach(),n.$cardwrapperSet=n.initCards(n.cardIds),n.$cardSideAnnouncer.before(n.$cardwrapperSet)),n.$cardwrapperSet.prepend(n.summaryScreen.getDOM()),!0===t&&(n.$cardSideAnnouncer=m("<div>",{html:n.params.cardFrontLabel,class:"h5p-dialogcards-card-side-announcer","aria-live":"polite","aria-hidden":"true"}),n.$footer=n.createFooter(),n.$mainContent=m("<div>").append(n.$header).append(n.$cardwrapperSet).append(n.$cardSideAnnouncer).append(n.$footer).appendTo(n.$inner),n.hasNoTexts&&n.cards.forEach((function(t){t.setNoText()})),n.on("reset",(function(){this.reset()})),n.on("resize",n.resize),n.round=void 0!==n.previousState.round?n.previousState.round:1)},n.createFooter=function(){var t=m("<nav>",{class:"h5p-dialogcards-footer",role:"navigation"});return"normal"===n.params.mode?(n.$prev=f.createButton({class:"h5p-dialogcards-footer-button h5p-dialogcards-prev truncated","aria-label":n.params.prev,title:n.params.prev}).click((function(){n.prevCard()})).appendTo(t),n.$next=f.createButton({class:"h5p-dialogcards-footer-button h5p-dialogcards-next truncated","aria-label":n.params.next,title:n.params.next}).click((function(){n.nextCard()})).appendTo(t),n.$retry=f.createButton({class:"h5p-dialogcards-footer-button h5p-dialogcards-retry h5p-dialogcards-disabled",title:n.params.retry,html:n.params.retry}).click((function(){n.trigger("reset")})).appendTo(t),n.$progress=m("<div>",{id:"h5p-dialogcards-progress-"+a.idCounter,class:"h5p-dialogcards-progress","aria-live":"assertive"}).appendTo(t)):(n.$round=m("<div>",{class:"h5p-dialogcards-round"}).appendTo(t),n.$progress=m("<div>",{class:"h5p-dialogcards-cards-left","aria-live":"assertive"}).appendTo(t)),t},n.updateImageSize=function(){var t=0,e=n.cards[n.currentCardId].getDOM().find(".h5p-dialogcards-card-content");if(n.params.dialogs.forEach((function(r){var a;r.front.image&&(a=r.front.image.height/r.front.image.width*e.get(0).getBoundingClientRect().width)>t&&(t=a),r.back.image&&(a=r.back.image.height/r.back.image.width*e.get(0).getBoundingClientRect().width)>t&&(t=a)})),t>0){var r=t/parseFloat(n.$inner.css("font-size"));r>15&&(r=15),n.cards.forEach((function(t){t.setImageHeight("".concat(r,"em"))}))}},n.initCards=function(t){n.cards=[],n.currentCardId=0,n.params.behaviour.randomCards&&(t=H5P.shuffleArray(t));for(var e=m("<div>",{class:"h5p-dialogcards-cardwrap-set"}),r=0;r<t.length&&!(r>=2);r++){var a=n.getCard(t[r]);a.setProgressText(r+1,t.length),n.cards.push(a);var i=a.getDOM();r===n.currentCardId&&(i.addClass("h5p-dialogcards-current"),n.$current=i),a.addTipToCard(i.find(".h5p-dialogcards-card-content"),"front",r),e.append(i)}return e},n.handleCardTurned=function(t){n.$cardSideAnnouncer.html(t?n.params.cardFrontLabel:n.params.cardBackLabel),n.params.behaviour.enableRetry&&n.currentCardId+1===n.cardIds.length&&n.$retry&&(n.$retry.removeClass("h5p-dialogcards-disabled"),n.truncateRetryButton())},n.updateNavigation=function(){if("normal"===n.params.mode)n.getCurrentSelectionIndex()<n.cardIds.length-1?(n.$next.removeClass("h5p-dialogcards-disabled"),n.$retry.addClass("h5p-dialogcards-disabled")):n.$next.addClass("h5p-dialogcards-disabled"),n.currentCardId>0&&!n.params.behaviour.disableBackwardsNavigation?n.$prev.removeClass("h5p-dialogcards-disabled"):n.$prev.addClass("h5p-dialogcards-disabled"),n.$progress.text(n.params.progressText.replace("@card",n.getCurrentSelectionIndex()+1).replace("@total",n.cardIds.length)),n.cards[n.findCardPosition(n.cards[n.currentCardId].id)].resizeOverflowingText();else{n.$round.text(n.params.round.replace("@round",n.round));var t=n.getCurrentSelectionIndex();n.$progress.text(n.params.cardsLeft.replace("@number",n.cardIds.length-t))}n.trigger("resize")},n.showSummary=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=t?n.cardManager.getPileSizes():n.cardManager.updatePiles(n.results),r=n.results.filter((function(t){return!0===t.result})).length,a=n.results.length-r,i=n.cardPoolSize-r-a,o=e.slice(-1)[0],s=o===n.cardPoolSize,d={round:n.round,results:[{field:"h5p-dialogcards-round-cards-right",score:{value:r,max:a+r}},{field:"h5p-dialogcards-round-cards-wrong",score:{value:a,max:a+r}},{field:"h5p-dialogcards-round-cards-not-shown",score:{value:i}},{field:"h5p-dialogcards-overall-cards-completed",score:{value:o,max:n.cardPoolSize}},{field:"h5p-dialogcards-overall-completed-rounds",score:{value:n.round}}]};s&&(d.done=!0,d.message=n.params.summaryAllDone.replace("@cards",n.cardPoolSize).replace("@max",n.params.behaviour.maxProficiency-1)),n.summaryScreen.update(d),n.summaryScreen.show(),n.hideCards(),n.trigger("resize")},n.showCards=function(){n.$cardwrapperSet.find(".h5p-dialogcards-cardwrap").removeClass("h5p-dialogcards-gone"),n.$footer.removeClass("h5p-dialogcards-gone"),n.cardsShown=!0},n.hideCards=function(){n.$cardwrapperSet.find(".h5p-dialogcards-cardwrap").addClass("h5p-dialogcards-gone"),n.$footer.addClass("h5p-dialogcards-gone"),n.cardsShown=!1},n.nextCard=function(t){var e=n.cards[n.currentCardId];if(void 0!==t){var r,a;n.results.push(t);var i=n.params.progressText.replace("@card",n.currentCardId+1).replace("@total",n.params.dialogs.length),o=e.card.front.text||(null===(r=e.card.front)||void 0===r||null===(a=r.image)||void 0===a?void 0:a.imageAlt),s={contentId:n.contentId,subContentId:e.card.front.subContentId,libraryInfo:{versionedNameNoSpaces:"H5P.DialogcardsCard-".concat(n.libraryInfo.majorVersion,".").concat(n.libraryInfo.minorVersion)},parent:p(n),getTitle:function(){return i},getScore:function(){return t.result?1:0},getMaxScore:function(){return 1},xAPIDefinition:{interactionType:"true-false",description:"".concat(i).concat(o?": "+o:""),name:i,correctResponsesPattern:["true"],type:"http://adlnet.gov/expapi/activities/cmi.interaction"},xAPIResult:{response:t.result.toString()}},d=n.createXAPIEventTemplate("answered");for(var c in d.setContext(s),d.setObject(s),s.xAPIDefinition)d.data.statement.object.definition[c]=s.xAPIDefinition[c];for(var l in d.setScoredResult(s.getScore(),s.getMaxScore(),s,!0,s.getScore()===s.getMaxScore()),s.xAPIResult)d.data.statement.result[l]=s.xAPIResult[l];n.trigger(d),H5P&&H5P.KLScreenshot&&(e.highlightButton(t.result?"correct":"incorrect",!0),H5P.KLScreenshot.takeScreenshot({subContentId:e.card.front.subContentId,getTitle:function(){return i},trigger:n.trigger},n.$inner.get(0)))}e.highlightButton("correct",!1),e.highlightButton("incorrect",!1),e.stopAudio(),n.cardIds.length-n.currentCardId!=1?n.gotoCard(n.currentCardId+1):"repetition"===n.params.mode&&(n.$progress.text(n.params.cardsLeft.replace("@number",0)),e.showSummaryButton(n.showSummary))},n.getCard=function(t){var e=n.cardManager.getCard(t);return e.createButtonListeners(),e},n.findCardPosition=function(t){var e;return n.cards.forEach((function(r,a){e||r.id!==t||(e=a)})),e},n.insertCardToDOM=function(t,e){var r=t.getDOM();void 0===e?r.appendTo(n.$cardwrapperSet):0===e?n.$cardwrapperSet.prepend(r):n.$cardwrapperSet.children().eq(e).after(r),t.addTipToCard(r.find(".h5p-dialogcards-card-content"),"front",e)},n.gotoCard=function(t){if(!(t<0||t>=n.cardIds.length)){var e=n.cards[n.currentCardId];e.stopAudio(),e.getDOM().removeClass("h5p-dialogcards-current");var r=[];t>0&&r.push(t-1),r.push(t),t+1<n.cardIds.length&&r.push(t+1),r.forEach((function(t){if(void 0===n.findCardPosition(n.cardIds[t])){var e=n.getCard(n.cardIds[t]);e.setProgressText(t+1,n.cardIds.length);var r=Math.min(t+1,n.cardIds.length-1),a=n.findCardPosition(n.cardIds[r])||n.cards.length;n.cards.splice(a,0,e),n.insertCardToDOM(e,a)}})),n.resize(),t=n.findCardPosition(n.cardIds[t]),n.cards.forEach((function(e,r){r<t?e.getDOM().addClass("h5p-dialogcards-previous"):(e.getDOM().removeClass("h5p-dialogcards-previous"),r===t&&e.getDOM().addClass("h5p-dialogcards-current"))})),n.currentCardId=t,n.updateNavigation(),n.cards[n.currentCardId].setCardFocus()}},n.prevCard=function(){n.gotoCard(n.getCurrentSelectionIndex()-1)},n.showAllAudio=function(){n.$cardwrapperSet.find(".h5p-audio-inner").removeClass("hide")},n.restartRepetition=function(){n.cardManager.reset(),n.round=0,n.nextRound()},n.nextRound=function(){n.round++,n.summaryScreen.hide(),n.showCards(),n.reset(),n.createDOM(),n.updateNavigation(),n.cards[n.currentCardId].setCardFocus(!0),n.trigger("resize")},n.reset=function(){n.results=[],n.cards[n.currentCardId].stopAudio(n.$current.index()),n.cards.forEach((function(t){t.reset()})),n.currentCardId=0,"normal"===n.params.mode&&n.cards[n.currentCardId].getDOM().addClass("h5p-dialogcards-current"),n.updateNavigation(),n.$retry&&n.$retry.addClass("h5p-dialogcards-disabled"),n.showAllAudio(),n.cards[n.currentCardId].resizeOverflowingText(),n.cards[n.currentCardId].setCardFocus()},n.resize=function(){var t;n.handleOrientationChange();var e=null,r=(n.$inner.find(".h5p-dialogcards-title").outerHeight()||0)+(n.$inner.find(".h5p-dialogcards-description").outerHeight(!0)||0)+(n.$footer.outerHeight()||0),a=n.isMobileLandscape();if("number"==typeof window.orientation&&n.$cardwrapperSet.find(".h5p-dialogcards-summary-screen").hasClass("h5p-dialogcards-gone")&&n.params.behaviour.scaleTextNotCard){if(n.$inner.toggleClass("h5p-landscape",a),a){var i,o;e=n.isRoot()?n.computeDisplayLimitsKLL():null;var s=n.isIOS()&&a?screen.width:screen.height;1===(null===(i=e)||void 0===i?void 0:i.height)&&(e.height=s),null!==(o=e)&&void 0!==o&&o.height?n.$cardwrapperSet.css("max-height","".concat(e.height-r,"px")):n.$cardwrapperSet.css("max-height","")}}else n.$cardwrapperSet.css("max-height","");var d,c,l=0;(e&&a&&n.params.behaviour.scaleTextNotCard?n.cards.forEach((function(t){t.setImageHeight("")})):n.updateImageSize(),n.params.behaviour.scaleTextNotCard||!1===n.cardsShown||n.determineCardSizes(),n.params.behaviour.scaleTextNotCard&&a&&null!==(t=e)&&void 0!==t&&t.height&&n.$cardwrapperSet.find(".h5p-dialogcards-summary-screen").hasClass("h5p-dialogcards-gone"))?(null===(d=e)||void 0===d?void 0:d.height)-r>1&&n.$cardwrapperSet.css("height","".concat((null===(c=e)||void 0===c?void 0:c.height)-r,"px")):(n.$cardwrapperSet.css("height","auto"),n.$cardwrapperSet.children(":not(.h5p-dialogcards-gone)").each((function(){var t=m(this).css("height","initial").outerHeight();if(m(this).css("height","inherit"),l=Math.max(t,l),!m(this).next(".h5p-dialogcards-cardwrap").length){var e=m(this).find(".h5p-dialogcards-cardholder").css("height","initial").outerHeight();l=Math.max(e,l),m(this).find(".h5p-dialogcards-cardholder").css("height","inherit")}})),n.$cardwrapperSet.css("height","".concat(l,"px")));n.scaleToFitHeight(),n.truncateRetryButton(),n.cards[n.currentCardId].resizeOverflowingText()},n.determineCardSizes=function(){var t=p(n);void 0===n.cardSizeDetermined&&(n.cardSizeDetermined=[]),n.$cardwrapperSet.children(":visible").each((function(e){var r=t.cards[e].id;if(-1===t.cardSizeDetermined.indexOf(r)){t.cardSizeDetermined.push(r);var a=m(".h5p-dialogcards-card-content",this),i=m(".h5p-dialogcards-card-text-inner-content",a),n=i[0].getBoundingClientRect().height,o=t.cards[e];o.changeText(o.getAnswer());var s=i[0].getBoundingClientRect().height,d=n>s?n:s,c=parseFloat(i.parent().parent().css("minHeight"));if(d<c&&(d=c),t.hasNoTexts){var l=i.find(".h5p-dialogcards-card-text");d=t.hasNoAudios?0:d-parseFloat(l.css("height")),l.css("height",0)}d/=parseFloat(a.css("fontSize")),i.parent().css("height",d+"em"),o.changeText(o.getText())}}))},n.scaleToFitHeight=function(){if(n.$cardwrapperSet&&n.$cardwrapperSet.is(":visible")&&n.params.behaviour.scaleTextNotCard)if(n.$inner.parents(".h5p-course-presentation").length){var t=n.$inner.parent();n.$inner.parents(".h5p-popup-container").length&&(t=n.$inner.parents(".h5p-popup-container"));var e=t.get(0).getBoundingClientRect().height,r=function(){var t=0;return n.$inner.children().each((function(){var e=m(this);t+=this.getBoundingClientRect().height+parseFloat(e.css("margin-top"))+parseFloat(e.css("margin-bottom"))})),t},i=r(),o=parseFloat(n.$inner.parent().css("font-size")),s=parseFloat(n.$inner.css("font-size"));if(e<i)for(;e<i&&!((s-=a.SCALEINTERVAL)<a.MINSCALE);)n.$inner.css("font-size",s/o+"em"),i=r();else for(var d=!0;d;){if((s+=a.SCALEINTERVAL)>a.MAXSCALE){d=!1;break}var c=s/o;n.$inner.css("font-size",c+"em"),e<=(i=r())&&(d=!1,c=(s-a.SCALEINTERVAL)/o,n.$inner.css("font-size",c+"em"))}}else n.cards[n.currentCardId].resizeOverflowingText()},n.truncateRetryButton=function(){if(n.$retry){n.$retry.removeClass("truncated"),n.$retry.html(n.params.retry);(n.$retry.get(0).getBoundingClientRect().width+parseFloat(n.$retry.css("margin-left"))+parseFloat(n.$retry.css("margin-right")))/n.$retry.parent().get(0).getBoundingClientRect().width>.3&&(n.$retry.addClass("truncated"),n.$retry.html(""))}},n.getCurrentSelectionIndex=function(){return n.cardIds.indexOf(n.cards[n.currentCardId].id)},n.getTitle=function(){return H5P.createTitle(n.contentData&&n.contentData.metadata&&n.contentData.metadata.title?n.contentData.metadata.title:"Dialog Cards")},n.getCurrentState=function(){return{cardPiles:n.cardManager.getPiles(),cardIds:n.cardIds,round:n.round,currentCardId:n.getCurrentSelectionIndex(),results:n.results}},n}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,g(e,r);var i=a.prototype;return i.computeDisplayLimits=function(){var t=this.getTopWindow(),e=this.isIOS()&&"landscape"===this.getOrientation()?{height:screen.width,width:screen.height}:{height:screen.height,width:screen.width};return t=t||{innerHeight:e.height,innerWidth:e.width},{height:Math.min(t.innerHeight,e.height),width:Math.min(t.innerWidth,this.$inner.get(0).offsetWidth)}},i.computeDisplayLimitsKLL=function(){var t=this.computeDisplayLimits();return t.height=Math.min(t.height,document.body.offsetHeight),t},i.isIOS=function(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},i.isMobileLandscape=function(){return this.isMobileDevice()&&"landscape"===this.getOrientation()},i.isMobileDevice=function(){var t,e=!1;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(t.substr(0,4)))&&(e=!0),e},i.getOrientation=function(){if(screen.orientation&&screen.orientation.type){if(screen.orientation.type.includes("portrait"))return"portrait";if(screen.orientation.type.includes("landscape"))return"landscape"}if("number"==typeof window.orientation){if(0===window.orientation||180===window.orientation)return"portrait";if(90===window.orientation||-90===window.orientation||270===window.orientation)return"landscape"}return"landscape"},i.getTopWindow=function(t){var e;t=t||window;try{e=t.parent.location.host===window.location.host}catch(t){e=null}return e?t.parent!==t&&t.parent?this.getTopWindow(t.parent):t:null},i.handleOrientationChange=function(){var t=this;if(this.params.behaviour.scaleTextNotCard){var e=this.isMobileLandscape();this.cards.forEach((function(r){"repetition"===t.params.mode&&(r.$buttonTurn.text(e?"":t.params.answer),r.$buttonCorrect.text(e?"":t.params.correctAnswer),r.$buttonIncorrect.text(e?"":t.params.incorrectAnswer)),e||t.$cardwrapperSet.css("max-height","")}))}},a}(H5P.EventDispatcher);v.idCounter=0,v.SCALEINTERVAL=.2,v.MAXSCALE=16,v.MINSCALE=4;var b=v;H5P.Dialogcards=b}();