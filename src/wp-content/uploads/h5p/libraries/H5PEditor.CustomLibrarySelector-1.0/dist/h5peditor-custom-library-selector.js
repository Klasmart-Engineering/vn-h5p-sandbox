(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}var e=function(){function e(t,i,n,r){var o,s=this;this.parent=t,this.field=i,this.params=n,this.setValue=r,this.contentTypesToHide=[],this.field.customLibrarySelector=e.extend({hide:[]},this.field.customLibrarySelector||{}),this.changes=[],this.passReadies=!0,this.$container=H5P.jQuery("<div>",{class:"h5peditor-column"}),this.fieldInstance=new H5PEditor.widgets[this.field.type](this.parent,this.field,this.params,this.setValue),this.fieldInstance.appendTo(this.$container),this.$errors=this.$container.find(".h5p-errors"),1!==(null===(o=this.fieldInstance.field)||void 0===o?void 0:o.options.length)&&(this.selectDOM=this.fieldInstance.$select.get(0),this.selectDOM.setAttribute("disabled","disabled"),this.waitForChildren(this.selectDOM,(function(){s.handleSelectDOMpopulated(),s.handleSelectDOMReady()}),100,600),this.fieldInstance.change((function(){s.handleSelectDOMpopulated()})))}var i=e.prototype;return i.handleSelectDOMReady=function(){this.selectDOM.removeAttribute("disabled")},i.handleSelectDOMpopulated=function(){for(var t=this.selectDOM.children.length-1;t>=1;t--){var e,i=this.selectDOM.children[t].value.split(" ")[0],n=null!==(e=this.params)&&void 0!==e&&e.library?this.params.library.split(" ")[0]:"";this.field.customLibrarySelector.hide.includes(i)&&n!==i&&this.selectDOM.removeChild(this.selectDOM.children[t])}},i.waitForChildren=function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;"function"==typeof e&&t&&(("number"!=typeof n||n<100)&&(n=200),"number"!=typeof r&&(r=100),0!==r?t.children&&1!==t.children.length?e():setTimeout((function(){i.waitForChildren(t,e,n,r-1)}),n):this.handleSelectDOMReady())},i.appendTo=function(t){this.$container.appendTo(t)},i.validate=function(){return this.fieldInstance.validate()},i.remove=function(){this.$container.remove()},e.extend=function(){for(var e=1;e<arguments.length;e++)for(var i in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],i)&&("object"===t(arguments[0][i])&&"object"===t(arguments[e][i])?this.extend(arguments[0][i],arguments[e][i]):arguments[0][i]=arguments[e][i]);return arguments[0]},e}();H5PEditor=H5PEditor||{},H5PEditor.CustomLibrarySelector=e,H5PEditor.widgets.customlibraryselector=H5PEditor.CustomLibrarySelector})();